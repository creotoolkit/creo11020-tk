<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9">
      <meta name="ch:resourceid" content="Datum_forn_surf_curv" scheme="atiChunkerMeta">
      
      
      
      
      
      
      <link href="css/styler.css" rel="stylesheet" type="text/css">
      <title>Event-driven Programming: Foreign Datum Curves</title>
   
<SCRIPT LANGUAGE="JAVASCRIPT">
  function findProperNode() { top.frames[0].document.apiwizard.manual("MANDATUM_FORN_SURF_CURV0", location.hash); }
</SCRIPT>

</head>
   <body onLoad="findProperNode()">
      
         
         <a name="0"> </a><div class=" x-title-65-0 x-title-65-1" combinedFontName="off" id="styler-id1.1.1.89.1" class="ChapterTitle">Event-driven Programming: Foreign Datum Curves</div>
         <div class=" x-body-2-0">
            <div class=" x-p-7-0">This <span class=" x-ph-2-0"><span xmlns="" profilecode="100000000">section</span></span> describes the <span class=" x-ph-2-0" id="Datum_forn_surf_curv_Event-drivenProgrammingForeignDatum_91_7">Creo TOOLKIT</span> functions that enable you to create foreign datum curves.
            </div>
         </div>
         <div class=" x-topic-4-0 x-topic-4-1 x-topic-4-2" combinedFontName="off" id="Datum_forn_surf_curv_ForeignDatumCurvesCurvesforeignDatu_91_8">
            
            <a name="1"> </a><div class=" x-title-33-0 x-title-33-2" combinedFontName="off" id="styler-id1.1.1.89.3.1" class="Heading1">Foreign Datum Curves</div>
            <div class=" x-abstract-1-0"><a xmlns="" class="indexterm" name="2"></a><span class=" x-indexterm-1-0"></span><a xmlns="" class="indexterm" name="3"></a><span class=" x-indexterm-1-0"></span></div>
            <div class=" x-body-3-0">
               <div class=" x-p-7-0">In <span class=" x-ph-2-0" id="Datum_forn_surf_curv_ForeignDatumCurvesCurvesforeignDatu_91_16">Creo TOOLKIT</span>, you create foreign datum curves using the feature creation techniques described in the <span class=" x-ph-2-0"><span xmlns="" profilecode="100000000">section</span></span> <a href="Features_create.html" class=" x-xref-4-0 x-xref-4-5 x-xref-4-6 x-xref-4-9">Element Trees: Principles of Feature Creation</a>. The header file <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">ProForeignCurve.h</span></span> contains the element tree structure and a table that maps each element to an element identifier, value type, and valid values.
               </div>
               <div class=" x-p-7-0">The following figure shows the element tree structure for foreign datum curve creation. Note that all elements are required.</div>
               <div class=" x-fig-2-0 x-fig-2-2" id="styler-id1.1.1.89.3.3.3">
                  <div class=" x-title-62-0" combinedFontName="off" id="styler-id1.1.1.89.3.3.3.1">Element Tree for Foreign Datum Curve</div>
                  <div class=" x-image-1-0 x-image-1-1"><img alt="Image" src="graphics/ele_tree_foreign_datum_curve.gif"></div>
               </div>
               <div class=" x-p-7-0">As the element tree implies, foreign datum curve creation requires that you provide the feature type, curve type, curve class,
                  reference coordinate system, data used in the analytical representation of the curve, and curve continuity. <span class=" x-ph-2-0" id="Datum_forn_surf_curv_ForeignDatumCurvesCurvesforeignDatu_91_26"><span xmlns="" profilecode="1">Creo Parametric</span></span> uses this information, together with an evaluation function, to create an internal representation of the curve.
               </div>
            </div>
            <div class=" x-topic-11-0 x-topic-11-1" id="Datum_forn_surf_curv_ForeignDatumCurvesevaluationFunctio_91_28">
               
               <a name="4"> </a><div class=" x-title-27-0 x-title-27-2" combinedFontName="off" id="styler-id1.1.1.89.3.4.1" class="Heading2">Providing an Evaluation Function</div>
               <div class=" x-abstract-1-0"><a xmlns="" class="indexterm" name="5"></a><span class=" x-indexterm-1-0"></span><a xmlns="" class="indexterm" name="6"></a><span class=" x-indexterm-1-0"></span><a xmlns="" class="indexterm" name="7"></a><span class=" x-indexterm-1-0"></span></div>
               <div class=" x-body-3-0">
                  <div class=" x-p-7-0">Function Introduced:</div>
                  <div class=" x-ul-2-0">
                     <table border="0" cellpadding="0" cellspacing="0" class=" x-li-13-0" style="table-layout: fixed; " width="100%">
                        <col style="width: 0em">
                        <col style="width: 18pt">
                        <col>
                        <tbody>
                           <tr valign="baseline">
                              <td align="right"></td>
                              <td align="left" style="word-break: keep-all; "></td>
                              <td><span class=" x-p-4-0"><a name="8"> </a><span class=" x-apiname-3-0" mcad="FunctionList"><li class="FunctionList"><A HREF="../api/1512.html">ProForeignCurveEvalFunction()</A></li></span></span></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <div class=" x-p-7-0">In addition to building the element tree for your datum curve feature, you must provide its analytical representation to <span class=" x-ph-2-0" id="Datum_forn_surf_curv_ForeignDatumCurvesevaluationFunctio_91_45"><span xmlns="" profilecode="1">Creo Parametric</span></span>. This representation is made available to <span class=" x-ph-2-0" id="Datum_forn_surf_curv_ForeignDatumCurvesevaluationFunctio_91_45"><span xmlns="" profilecode="1">Creo Parametric</span></span> in a special function called an evaluator, or evaluation function. 
                  </div>
                  <div class=" x-p-7-0">The evaluation function must contain parameterized equations for the X, Y, and Z coordinates of points that define the curve.
                     If C(X,Y,Z) is a function representing the curve in three-dimensional space, you can represent the parameterized equations
                     for each coordinate as follows:
                  </div><pre class=" x-codeblock-3-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">     X = f(t)
     Y = g(t)
     Z = h(t)</span></pre><div class=" x-p-7-0">In these equations, the parameter <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">t</span></span> ranges from 0 to 1 over the extent of the curve. For example, a parametric representation of a circle of radius <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">R</span></span> lying in the XY-plane, whose center coincides with the origin, is as follows:
                  </div><pre class=" x-codeblock-3-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">     X = R*cos(2*PI*t);
     Y = R*sin(2*PI*t);
     Z = 0;</span></pre><div class=" x-p-7-0">In these equations, <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">PI</span></span> = 3.14159. 
                  </div>
                  <div class=" x-p-7-0"><span class=" x-ph-2-0" id="Datum_forn_surf_curv_ForeignDatumCurvesevaluationFunctio_91_58">Creo TOOLKIT</span> provides the prototype for the evaluation function. The syntax is as follows:
                  </div><pre class=" x-codeblock-3-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">typedef ProError (*ProForeignCurveEvalFunction)
(
  ProName        class,          /* input */
  wchar_t       *data_string,    /* input */
  ProSelection   csys,           /* input */
  double         curve_param,    /* input */
  ProVector      xyz_point,      /* output */
  ProVector      deriv1,         /* output */
  ProVector      deriv2          /* output */
);</span></pre><div class=" x-p-7-0">The function arguments are as follows:</div>
                  <div class=" x-ul-2-0">
                     <table border="0" cellpadding="0" cellspacing="0" class=" x-li-13-0" style="table-layout: fixed; " width="100%">
                        <col style="width: 0em">
                        <col style="width: 18pt">
                        <col>
                        <tbody>
                           <tr valign="baseline">
                              <td align="right"></td>
                              <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                              <td><span class=" x-p-4-0"><span class=" x-parmname-3-0">class</span>&#8212;Identifies the type of curves generated by the evaluation function.</span></td>
                           </tr>
                        </tbody>
                     </table>
                     <table border="0" cellpadding="0" cellspacing="0" class=" x-li-16-0" style="table-layout: fixed; " width="100%">
                        <col style="width: 0em">
                        <col style="width: 18pt">
                        <col>
                        <tbody>
                           <tr valign="baseline">
                              <td align="right"></td>
                              <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                              <td><span class=" x-p-4-0"><span class=" x-parmname-3-0">data_string</span>&#8212;The flag that controls specific attributes of the curve.</span></td>
                           </tr>
                        </tbody>
                     </table>
                     <table border="0" cellpadding="0" cellspacing="0" class=" x-li-16-0" style="table-layout: fixed; " width="100%">
                        <col style="width: 0em">
                        <col style="width: 18pt">
                        <col>
                        <tbody>
                           <tr valign="baseline">
                              <td align="right"></td>
                              <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                              <td><span class=" x-p-4-0"><span class=" x-parmname-3-0">csys</span>&#8212;The reference coordinate system with respect to which the curve geometry is defined. Pass it to the evaluation function as
                                    a <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">ProSelection</span></span> object.</span></td>
                           </tr>
                        </tbody>
                     </table>
                     <table border="0" cellpadding="0" cellspacing="0" class=" x-li-16-0" style="table-layout: fixed; " width="100%">
                        <col style="width: 0em">
                        <col style="width: 18pt">
                        <col>
                        <tbody>
                           <tr valign="baseline">
                              <td align="right"></td>
                              <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                              <td><span class=" x-p-4-0"><span class=" x-parmname-3-0">curve_param</span>&#8212;The parameter value at which the X, Y, and Z coordinates, as well as the first and second derivatives, will be evaluated.
                                    </span></td>
                           </tr>
                        </tbody>
                     </table>
                     <table border="0" cellpadding="0" cellspacing="0" class=" x-li-16-0" style="table-layout: fixed; " width="100%">
                        <col style="width: 0em">
                        <col style="width: 18pt">
                        <col>
                        <tbody>
                           <tr valign="baseline">
                              <td align="right"></td>
                              <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                              <td><span class=" x-p-4-0"><span class=" x-parmname-3-0">xyz_point</span>&#8212;The X, Y, and Z coordinates at the value of <span class=" x-parmname-3-0">curve_param</span>.</span></td>
                           </tr>
                        </tbody>
                     </table>
                     <table border="0" cellpadding="0" cellspacing="0" class=" x-li-16-0" style="table-layout: fixed; " width="100%">
                        <col style="width: 0em">
                        <col style="width: 18pt">
                        <col>
                        <tbody>
                           <tr valign="baseline">
                              <td align="right"></td>
                              <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                              <td><span class=" x-p-4-0"><span class=" x-parmname-3-0">deriv1</span>&#8212;The values of the first derivatives of X, Y, and Z with respect to the parameter, at the value of <span class=" x-parmname-3-0">curve_param</span>. </span></td>
                           </tr>
                        </tbody>
                     </table>
                     <table border="0" cellpadding="0" cellspacing="0" class=" x-li-14-0" style="table-layout: fixed; " width="100%">
                        <col style="width: 0em">
                        <col style="width: 18pt">
                        <col>
                        <tbody>
                           <tr valign="baseline">
                              <td align="right"></td>
                              <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                              <td><span class=" x-p-4-0"><span class=" x-parmname-3-0">deriv2</span>&#8212;The values of the second derivatives of X, Y, and Z with respect to the parameter, at the value of <span class=" x-parmname-3-0">curve_param</span>. </span></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <div class=" x-p-7-0">All arguments are passed to the evaluation function by <span class=" x-ph-2-0" id="Datum_forn_surf_curv_ForeignDatumCurvesevaluationFunctio_91_45"><span xmlns="" profilecode="1">Creo Parametric</span></span>, based on the values you provide for the elements in the element tree. 
                  </div>
                  <div class=" x-p-7-0">A single evaluation function can be used to create a number of curve variations within a given class. The parameterized curve
                     equations typically contain constants whose values control the shape, size, location, and orientation of the curve. You can
                     write the evaluation function such that, depending on the value of the <span class=" x-parmname-3-0">data_string</span> argument, different values of those constants will be used to calculate the location of points on the curve.
                  </div>
               </div>
               <div class=" x-topic-11-0 x-topic-11-1" id="Datum_forn_surf_curv_ForeignDatumCurvescontinuityContinu_91_92">
                  
                  <div class=" x-title-22-0 x-title-22-1" combinedFontName="off" id="styler-id1.1.1.89.3.4.4.1">Curve Continuity</div>
                  <div class=" x-abstract-1-0"><a xmlns="" class="indexterm" name="9"></a><span class=" x-indexterm-1-0"></span><a xmlns="" class="indexterm" name="10"></a><span class=" x-indexterm-1-0"></span><a xmlns="" class="indexterm" name="11"></a><span class=" x-indexterm-1-0"></span></div>
                  <div class=" x-body-3-0">
                     <div class=" x-p-7-0">Curve continuity, in a sense, defines the smoothness of intersections between the ends of the foreign curve and other geometry
                        in the model. It also defines the continuity of three-dimensional geometry created from the curve, such as a swept surface.
                        First-order continuity implies that the first derivatives of two adjoining curve segments are equal at the point at which
                        the curves join. Second-order continuity is similarly defined. Depending on the curve continuity you want, the evaluator function
                        needs to contain first and second derivatives of the parameterized curve equations.
                     </div>
                     <div class=" x-p-7-0">You specify the curve continuity using the <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">PRO_E_CURVE_CONTINUITY</span></span> element in the element tree.   The valid values, contained in the enumerated type <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">ProForeignCrvCont</span></span>, are as follows:
                     </div>
                     <div class=" x-ul-2-0">
                        <table border="0" cellpadding="0" cellspacing="0" class=" x-li-13-0" style="table-layout: fixed; " width="100%">
                           <col style="width: 0em">
                           <col style="width: 18pt">
                           <col>
                           <tbody>
                              <tr valign="baseline">
                                 <td align="right"></td>
                                 <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                                 <td><span class=" x-p-4-0"><span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">PRO_FOREIGN_CURVE_CALC_XYZ</span></span></span></td>
                              </tr>
                           </tbody>
                        </table>
                        <table border="0" cellpadding="0" cellspacing="0" class=" x-li-16-0" style="table-layout: fixed; " width="100%">
                           <col style="width: 0em">
                           <col style="width: 18pt">
                           <col>
                           <tbody>
                              <tr valign="baseline">
                                 <td align="right"></td>
                                 <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                                 <td><span class=" x-p-4-0"><span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">PRO_FOREIGN_CURVE_CALC_XYZ_1_DER</span></span></span></td>
                              </tr>
                           </tbody>
                        </table>
                        <table border="0" cellpadding="0" cellspacing="0" class=" x-li-14-0" style="table-layout: fixed; " width="100%">
                           <col style="width: 0em">
                           <col style="width: 18pt">
                           <col>
                           <tbody>
                              <tr valign="baseline">
                                 <td align="right"></td>
                                 <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                                 <td><span class=" x-p-4-0"><span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">PRO_FOREIGN_CURVE_CALC_XYZ_1_AND_2_DER</span></span></span></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <div class=" x-p-7-0">These values correspond to zeroth-, first-, and second-order continuity, respectively. If you use the value <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">PRO_FOREIGN_CURVE_CALC_XYZ</span></span>, <span class=" x-ph-2-0" id="Datum_forn_surf_curv_ForeignDatumCurvescontinuityContinu_91_117"><span xmlns="" profilecode="1">Creo Parametric</span></span> passes <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">NULL</span></span> for <span class=" x-parmname-3-0">deriv1</span> and <span class=" x-parmname-3-0">deriv2</span> to the evaluation function. Similarly, if you use the value <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">PRO_FOREIGN_CURVE_CALC_XYZ_1_DER</span></span>, <span class=" x-ph-2-0" id="Datum_forn_surf_curv_ForeignDatumCurvescontinuityContinu_91_117"><span xmlns="" profilecode="1">Creo Parametric</span></span> passes <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">NULL</span></span> for <span class=" x-parmname-3-0">deriv2</span> to the evaluation function. Therefore, you should check for <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">NULL</span></span> values of <span class=" x-parmname-3-0">deriv1</span> and <span class=" x-parmname-3-0">deriv2</span> in your evaluation function before trying to assign derivative values to them.
                     </div>
                     <div class=" x-p-7-0"><span class=" x-ph-2-0" id="Datum_forn_surf_curv_ForeignDatumCurvescontinuityContinu_91_117"><span xmlns="" profilecode="1">Creo Parametric</span></span> calls your evaluation function multiple times for a series of values of the curve parameter, ranging from 0 to 1. The function
                        outputs the following information:
                     </div>
                     <div class=" x-ul-2-0">
                        <table border="0" cellpadding="0" cellspacing="0" class=" x-li-13-0" style="table-layout: fixed; " width="100%">
                           <col style="width: 0em">
                           <col style="width: 18pt">
                           <col>
                           <tbody>
                              <tr valign="baseline">
                                 <td align="right"></td>
                                 <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                                 <td><span class=" x-p-4-0">X, Y, and Z coordinates of the curve at the specified parameter value</span></td>
                              </tr>
                           </tbody>
                        </table>
                        <table border="0" cellpadding="0" cellspacing="0" class=" x-li-14-0" style="table-layout: fixed; " width="100%">
                           <col style="width: 0em">
                           <col style="width: 18pt">
                           <col>
                           <tbody>
                              <tr valign="baseline">
                                 <td align="right"></td>
                                 <td align="left" style="word-break: keep-all; ">&#8226;&nbsp;</td>
                                 <td><span class=" x-p-4-0">Values of the first and second derivatives, as needed for the desired curve continuity</span></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <div class=" x-p-7-0">These values are then used by <span class=" x-ph-2-0" id="Datum_forn_surf_curv_ForeignDatumCurvescontinuityContinu_91_117"><span xmlns="" profilecode="1">Creo Parametric</span></span> to construct the curve.
                     </div>
                  </div>
               </div>
            </div>
            <div class=" x-topic-11-0 x-topic-11-1" id="Datum_forn_surf_curv_BindevaluationFunctionsForeignDatum_91_141">
               
               <a name="12"> </a><div class=" x-title-27-0 x-title-27-2" combinedFontName="off" id="styler-id1.1.1.89.3.5.1" class="Heading2">Binding the Evaluation Function to a Class</div>
               <div class=" x-abstract-1-0"><a xmlns="" class="indexterm" name="13"></a><span class=" x-indexterm-1-0"></span><a xmlns="" class="indexterm" name="14"></a><span class=" x-indexterm-1-0"></span></div>
               <div class=" x-body-3-0">
                  <div class=" x-p-7-0">Function Introduced:</div>
                  <div class=" x-ul-2-0">
                     <table border="0" cellpadding="0" cellspacing="0" class=" x-li-13-0" style="table-layout: fixed; " width="100%">
                        <col style="width: 0em">
                        <col style="width: 18pt">
                        <col>
                        <tbody>
                           <tr valign="baseline">
                              <td align="right"></td>
                              <td align="left" style="word-break: keep-all; "></td>
                              <td><span class=" x-p-4-0"><a name="15"> </a><span class=" x-apiname-3-0" mcad="FunctionList"><li class="FunctionList"><A HREF="../api/1513.html">ProForeignCurveClassEvalSet()</A></li></span></span></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <div class=" x-p-7-0">The evaluation function must be bound to a class. This is done with a call to the function <span class=" x-cmdname-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">ProForeignCurveClassEvalSet()</span></span>. The function takes as arguments the class name and a pointer to the evaluation function. If you call <span class=" x-cmdname-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">ProForeignCurveClassEvalSet()</span></span> and pass <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">NULL</span></span> for the evaluation function pointer, it unbinds a previously bound evaluation function from the class. 
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>
