<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9">
      <meta name="ch:resourceid" content="migrate_ptk_to_otk" scheme="atiChunkerMeta">
      
      
      
      
      
      
      <link href="css/styler.css" rel="stylesheet" type="text/css">
      <title>Migrating to Creo Object TOOLKIT C++</title>
   
<SCRIPT LANGUAGE="JAVASCRIPT">
  function findProperNode() { top.frames[0].document.apiwizard.manual("MANMIGRATE_PTK_TO_OTK0", location.hash); }
</SCRIPT>

</head>
   <body onLoad="findProperNode()">
      
         
         <a name="0"> </a><div class=" x-title-65-0 x-title-65-1" combinedFontName="off" id="styler-id1.1.1.96.1" class="ChapterTitle">Migrating to Creo Object TOOLKIT C++</div>
         <div class=" x-body-2-0">
            <div class=" x-p-7-0">This <span class=" x-ph-2-0"><span xmlns="" profilecode="100000000">section</span></span> describes how to migrate to <span class=" x-ph-2-0" id="migrate_ptk_to_otk_MigratingApplicationsToPTCObjectTOO-6_99_7">Creo Object
                  TOOLKIT C++</span>.
            </div>
         </div>
         <div class=" x-topic-4-0 x-topic-4-1 x-topic-4-2" combinedFontName="off" id="migrate_ptk_to_otk_Overview-C117FC3D_99_8">
            
            <a name="1"> </a><div class=" x-title-33-0 x-title-33-2" combinedFontName="off" id="styler-id1.1.1.96.3.1" class="Heading1">Overview</div>
            <div class=" x-body-3-0">
               <div class=" x-p-7-0">PTC introduced <span class=" x-ph-2-0" id="migrate_ptk_to_otk_Overview-C117FC3D_PTCCreoObjectToolki_99_12">Creo Object
                     TOOLKIT C++</span> as a part of its modernization plan and to improve productivity.
               </div>
               <div class=" x-p-7-0">To enable users to smoothly migrate their existing <span class=" x-ph-2-0" id="migrate_ptk_to_otk_Overview-C117FC3D_PTCCreoParametricTo_99_14">Creo TOOLKIT</span> applications, the <span class=" x-ph-2-0" id="migrate_ptk_to_otk_Overview-C117FC3D_PTCCreoParametricTo_99_14">Creo TOOLKIT</span> APIWizard provides links to equivalent <span class=" x-ph-2-0" id="migrate_ptk_to_otk_Overview-C117FC3D_PTCCreoObjectToolki_99_12">Creo Object
                     TOOLKIT C++</span> methods.
               </div>
               <div class=" x-p-7-0">Additionally, from <span class=" x-ph-2-0" id="migrate_ptk_to_otk_Overview-C117FC3D_PTCCreo-EC6F7D2F_99_18">Creo</span> <span class=" x-ph-2-0">3.0</span> onward, PTC provides a tool to facilitate migration of <span class=" x-ph-2-0" id="migrate_ptk_to_otk_Overview-C117FC3D_PTCCreoParametricTo_99_14">Creo TOOLKIT</span> applications to <span class=" x-ph-2-0" id="migrate_ptk_to_otk_Overview-C117FC3D_PTCCreoObjectToolki_99_12">Creo Object
                     TOOLKIT C++</span>.
               </div>
               <div class=" x-p-7-0">Certain functional areas are not yet available in <span class=" x-ph-2-0" id="migrate_ptk_to_otk_Overview-C117FC3D_PTCCreoObjectToolki_99_12">Creo Object
                     TOOLKIT C++</span>. In such cases, you can continue using the <span class=" x-ph-2-0" id="migrate_ptk_to_otk_Overview-C117FC3D_PTCCreoParametricTo_99_14">Creo TOOLKIT</span> functions in <span class=" x-ph-2-0" id="migrate_ptk_to_otk_Overview-C117FC3D_PTCCreoObjectToolki_99_12">Creo Object
                     TOOLKIT C++</span> applications, as both the toolkits are compatible. Refer to the <span class=" x-cite-1-0 x-cite-1-1">Creo Object TOOLKIT C++ User&#8217;s Guide</span> for more information.
               </div>
            </div>
         </div>
         <div class=" x-topic-8-0 x-topic-8-1 x-topic-8-2" id="migrate_ptk_to_otk_MigratingApplicationsUsingTools-C117F_99_27">
            
            <a name="2"> </a><div class=" x-title-33-0 x-title-33-2" combinedFontName="off" id="styler-id1.1.1.96.4.1" class="Heading1">Migrating Applications Using Tools</div>
            <div class=" x-body-3-0">
               <div class=" x-p-7-0">PTC provides the <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">mark_otkmethod.pl</span></span> tool to help you migrate applications from <span class=" x-ph-2-0" id="migrate_ptk_to_otk_MigratingApplicationsUsingTools-C117F_99_32">Creo TOOLKIT</span> to <span class=" x-ph-2-0" id="migrate_ptk_to_otk_MigratingApplicationsUsingTools-C117F_99_33">Creo Object
                     TOOLKIT C++</span>. This perl script is located at <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">&lt;creo_loadpoint&gt;\&lt;version&gt;\Common Files\protoolkit\scripts</span></span>. The script parses directories and looks for files with extensions such as, .c, .cxx, and .cpp, which are the default extensions
                  included in the script.
               </div>
               <div class=" x-p-7-0">The script searches for <span class=" x-ph-2-0" id="migrate_ptk_to_otk_MigratingApplicationsUsingTools-C117F_99_32">Creo TOOLKIT</span> functions in these files. When it finds <span class=" x-ph-2-0" id="migrate_ptk_to_otk_MigratingApplicationsUsingTools-C117F_99_32">Creo TOOLKIT</span> functions, the script inserts comments with recommendations of possible replacing <span class=" x-ph-2-0" id="migrate_ptk_to_otk_MigratingApplicationsUsingTools-C117F_99_33">Creo Object
                     TOOLKIT C++</span> methods. By default, the script uses the mapping table <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">protk2otkmap.txt</span></span> provided at <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">&lt;creo_loadpoint&gt;\&lt;version&gt;\Common Files\protoolkit\scripts</span></span>.
               </div>
               <div class=" x-p-7-0">The script options are listed when you run <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">mark_otkmethod.pl</span></span> with no arguments, or with options <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-Default">&#8211;</span><span xmlns="" class="cf-Monospace-combined-European_Alphabets">h</span></span>, <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">-?</span></span> or <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-Default">&#8211;</span><span xmlns="" class="cf-Monospace-combined-European_Alphabets">help</span></span>.
                  <div class=" x-note-1-0 x-note-1-3">
                     <div class=" x--ufe-note-1-0 x--ufe-note-1-1" combinedFontName="off">Note</div>
                     <div class=" x-p-7-0">The options may vary in future releases. </div>
                  </div>
               </div>
               <div class=" x-p-7-0">When you run the script, it saves a copy of the original files. However, PTC recommends that you back up all the files, before
                  running the script. 
               </div>
               <div class=" x-p-7-0">The script generates two types of outputs depending on the <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">-m</span></span> option. The <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">mark_otkmethod.pl</span></span> generates output similar to the <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">mark_deprecated.pl</span></span> script.
               </div>
               <div class=" x-p-7-0">For example, consider a file <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">Xsection.c</span></span>. It contains the following code: <pre class=" x-codeblock-1-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">    ProMessageDisplay(msgfil, "USER Pick the start plane");
    status = ProSelect("face", 1, NULL, NULL, NULL, NULL, &amp;sel, &amp;n_sel);
    if(status != PRO_TK_NO_ERROR || n_sel &lt; 1)
        return(0);

    ProSelectionModelitemGet(sel[0], &amp;surface_modelitem);
    ProSurfaceInit(part, surface_modelitem.id, &amp;surface);
    ProSurfaceTypeGet(surface, &amp;stype);
    if(stype != PRO_SRF_PLANE)
	return(0);
</span></pre></div>
               <div class=" x-p-7-0">If you specify the <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">-m</span></span> option, the original file is retained, and the output file with the name <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">&lt;filename&gt;_markup.c</span></span> is created. The recommended <span class=" x-ph-2-0" id="migrate_ptk_to_otk_MigratingApplicationsUsingTools-C117F_99_33">Creo Object
                     TOOLKIT C++</span> methods are inserted as comments on separate lines in the output file. In this example, for the file <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">Xsection.c</span></span>, the following output is generated in the file <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">Xsection_markup.c</span></span>:<pre class=" x-codeblock-1-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">   ProMessageDisplay(msgfil, "USER Pick the start plane");
  /* Replace ProMessageDisplay with pfcSession::UIDisplayMessage / 
         pfcSession::UIDisplayLocalizedMessage */

    status = ProSelect("face", 1, NULL, NULL, NULL, NULL, &amp;sel, &amp;n_sel);

/* Replace ProSelect with pfcBaseSession::Select */    
     if(status != PRO_TK_NO_ERROR || n_sel &lt; 1)
        return(0);

    ProSelectionModelitemGet(sel[0], &amp;surface_modelitem);

/* Replace ProSelectionModelitemGet with pfcSelection::GetSelModel / 
         pfcSelection::GetSelItem */
    ProSurfaceInit(part, surface_modelitem.id, &amp;surface);
    ProSurfaceTypeGet(surface, &amp;stype);
    if(stype != PRO_SRF_PLANE)
	return(0);
</span></pre></div>
               <div class=" x-p-7-0">If you do not specify the <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">-m</span></span> option, a copy of the original file is saved as <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">&lt;filename&gt;.c.orig</span></span>. The comments with recommendations are inserted in the original file. In this example, the original file <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">Xsection.c</span></span> is saved as <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">Xsection.c.orig</span></span>. The following output is generated in the file <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">Xsection.c</span></span>:<pre class=" x-codeblock-1-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">   /* Replace ProMessageDisplay -&gt; pfcSession::UIDisplayMessage / 
        pfcSession::UIDisplayLocalizedMessage */ </span><br xmlns="" class="empty"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">           ProMessageDisplay(msgfil, "USER Pick the start plane");
   
 status =/* Replace ProSelect -&gt; pfcBaseSession::Select */ 
   ProSelect("face", 1, NULL, NULL, NULL, NULL,  &amp;sel, &amp;n_sel);

    if(status != PRO_TK_NO_ERROR || n_sel &lt; 1)
        return(0);

    /* Replace ProSelectionModelitemGet -&gt; pfcSelection::GetSelModel / 
        pfcSelection::GetSelItem */ </span><br xmlns="" class="empty"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">          ProSelectionModelitemGet(sel[0], &amp;surface_modelitem);

    ProSurfaceInit(part, surface_modelitem.id, &amp;surface);
    ProSurfaceTypeGet(surface, &amp;stype);
    if(stype != PRO_SRF_PLANE)
	return(0);
</span></pre></div>
            </div>
         </div>
      </div>
   </body>
</html>
