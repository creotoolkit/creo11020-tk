<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9">
      <meta name="ch:resourceid" content="Aptk_revtool" scheme="atiChunkerMeta">
      
      
      
      
      
      
      <link href="css/styler.css" rel="stylesheet" type="text/css">
      <title>Updating Older Applications</title>
   
<SCRIPT LANGUAGE="JAVASCRIPT">
  function findProperNode() { top.frames[0].document.apiwizard.manual("MANAPTK_REVTOOL0", location.hash); }
</SCRIPT>

</head>
   <body onLoad="findProperNode()">
      
         
         <a name="0"> </a><div class=" x-title-65-0 x-title-65-1" combinedFontName="off" id="styler-id1.1.1.95.1" class="ChapterTitle">Updating Older Applications</div>
         <div class=" x-body-2-0">
            <div class=" x-p-7-0">This <span class=" x-ph-2-0"><span xmlns="" profilecode="100000000">section</span></span> describes the tools that are available for updating applications from older versions to the current release of <span class=" x-ph-2-0" id="Aptk_revtool_Ptk_revtoolUtility-B1728A0B_PTCCreoParametr_98_7">Creo TOOLKIT</span>.
            </div>
         </div>
         <div class=" x-topic-4-0 x-topic-4-1 x-topic-4-2" combinedFontName="off" id="Aptk_revtool_Overview-B171C2E9_98_8">
            
            <a name="1"> </a><div class=" x-title-33-0 x-title-33-2" combinedFontName="off" id="styler-id1.1.1.95.3.1" class="Heading1">Overview</div>
            <div class=" x-body-3-0">
               <div class=" x-p-7-0"><span class=" x-ph-2-0" id="Aptk_revtool_Overview-B171C2E9_PTCCreoParametricToolkit-_98_12">Creo TOOLKIT</span> users are responsible for updating their applications from older versions to use the new <span class=" x-ph-2-0" id="Aptk_revtool_Overview-B171C2E9_PTCCreoParametricToolkit-_98_12">Creo TOOLKIT</span> functions. When you update the applications, use the functions that have been updated in the current release.
               </div>
               <div class=" x-p-7-0">PTC provides tools that facilitate updating of your <span class=" x-ph-2-0" id="Aptk_revtool_Overview-B171C2E9_PTCCreoParametricToolkit-_98_12">Creo TOOLKIT</span> applications from older versions. However, in certain scenarios, the tools may not give expected results.
               </div>
            </div>
         </div>
         <div class=" x-topic-8-0 x-topic-8-1 x-topic-8-2" id="Aptk_revtool_ToolsAvailableForMigration-6E4ED7B743_1300">
            
            <a name="2"> </a><div class=" x-title-33-0 x-title-33-2" combinedFontName="off" id="styler-id1.1.1.95.4.1" class="Heading1">Tools Available for Updating Applications</div>
            <div class=" x-body-3-0">
               <div class=" x-p-7-0">PTC provides the <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">mark_deprecated.pl</span></span> tool to update your applications from older versions to the current release. This perl script is located at <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">&lt;creo_loadpoint&gt;\&lt;version&gt;\Common Files\protoolkit\scripts</span></span>. The script parses directories and looks for files with extensions such as, <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">.c</span></span>, <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">.cxx</span></span>, and <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">.cpp</span></span>, which are the default extensions included in the script.
               </div>
               <div class=" x-p-7-0">The script searches for deprecated symbols, such as, functions, structures, enumerated data types and so on, in these files.
                  When it finds such symbols, the script inserts comments with recommendations of possible replacements. By default, the script
                  uses the mapping table <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">protkmap.txt</span></span> provided at <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">&lt;creo_loadpoint&gt;\&lt;version&gt;\Common Files\protoolkit\scripts</span></span>. 
               </div>
               <div class=" x-p-7-0">The mapping table is based on DEPRECATED and SUCCESSORS tags specified in the <span class=" x-ph-2-0" id="Aptk_revtool_ToolsAvailableForMigration-6E4ED7B7_PTCCreo_98_29">Creo TOOLKIT</span> header files. Some deprecated functions may not have direct replacement functions. In such cases, the script adds the comment
                  AS APPROPRIATE.
               </div>
               <div class=" x-p-7-0">The script options are listed when you run <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">mark_deprecated.pl</span></span> with no arguments, or with options <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-Default">&#8211;</span><span xmlns="" class="cf-Monospace-combined-European_Alphabets">h</span></span>, <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">-?</span></span> or <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-Default">&#8211;</span><span xmlns="" class="cf-Monospace-combined-European_Alphabets">help</span></span>.
                  <div class=" x-note-1-0 x-note-1-3">
                     <div class=" x--ufe-note-1-0 x--ufe-note-1-1" combinedFontName="off">Note</div>
                     <div class=" x-p-7-0">The options may vary in future releases.</div>
                  </div>
               </div>
               <div class=" x-p-7-0">When you run the script, it saves a copy of the original files. However, PTC recommends that you back up all the files, before
                  running the script. 
               </div>
               <div class=" x-p-7-0">The script generates two types of output. The outputs depend on the <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">-m</span></span> option. 
               </div>
               <div class=" x-p-7-0">For example, consider a file with the name <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">model.c</span></span>. It contains the following code: <pre class=" x-codeblock-1-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">void findMdlParam(ProMdl mdl) {
  ProMdlnameShortdata *modelList = NULL;
/* should we call ProMdlInit here?? */
  error = ProMdlDependenciesList (mdl, &amp;modelList, &amp;noOFModels);
  error = ProMdlCopy (mdl); // what to do? </span><br xmlns="" class="empty"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">/*who knows? That's a question
  btkString errorStr = "\"ProMdlCopy (mdl)\" - error";
  PrintModelDependencies(modelList);
  /*
   * This is long multiline comment, where some Pro/TK
   * calls like ProCollectionAlloc or ProCollectioninstrAlloc 
   * can be found.
   */
  return;
}
</span></pre></div>
               <div class=" x-p-7-0">If you specify the <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">-m</span></span> option, the original file is retained, and the output file with the name <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">&lt;filename&gt;_markup.c</span></span> is created. The comments recommending new symbols are inserted on separate lines in the output file. For the file <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">model.c</span></span>, the following output is generated in the file <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">model_markup.c</span></span>:<pre class=" x-codeblock-1-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">void findMdlParam(ProMdl mdl) {
  ProMdlnameShortdata *modelList = NULL;
/* should we call ProMdlInit here?? */
/* Deprecated_API_Used: Replace ProMdlInit with ProMdlnameInit */
  error = ProMdlDependenciesList (mdl, &amp;modelList, &amp;noOfModels);
/* Deprecated_API_Used: Replace ProMdlDependenciesList </span><br xmlns="" class="empty"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">with ProMdlDependenciesMdlnameList */
  error = ProMdlCopy (mdl); // what to do? /*who knows? That's a question
/* Deprecated_API_Used: Replace ProMdlCopy with ProMdlnameCopy */
  btkString errorStr = "\"ProMdlCopy (mdl)\" - error";
  PrintModelDependencies(modelList);
  /*
   * This is long multiline comment, where I can also note some Pro/TK
   * calls like ProCollectionAlloc or ProCollectioninstrAlloc 
** Deprecated_API_Used: Replace ProCollectionAlloc with </span><br xmlns="" class="empty"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">ProCrvcollectionAlloc, ProSrfcollectionAlloc **
** Deprecated_API_Used: Replace ProCollectioninstrAlloc with AS APPROPRIATE **
   * can be found.
   */
  return;
}
</span></pre></div>
               <div class=" x-p-7-0">If you do not specify the <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">-m</span></span> option, a copy of the original file is saved as <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">&lt;filename&gt;.c.orig</span></span>. The comments with recommendations are inserted in the original file. For example, the original file is saved as <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">model.c.orig</span></span>. The following output is generated in the file <span class=" x-codeph-2-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">model.c</span></span>:<pre class=" x-codeblock-1-0" combinedFontName="Monospace-combined"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">void findMdlParam(ProMdl mdl) {
 ProMdlnameShortdata *modelList = NULL;
/* should we call ** PROTK_DEPRECATED ProMdlInit -&gt; 
ProMdlnameInit ** ProMdlInit here?? */
 error = /* PROTK_DEPRECATED ProMdlDependenciesList -&gt; 
ProMdlDependenciesMdlnameList */ 
ProMdlDependenciesList (mdl, &amp;modelList, &amp;noOfModels);
 error = /* PROTK_DEPRECATED ProMdlCopy -&gt; </span><br xmlns="" class="empty"><span xmlns="" class="cf-Monospace-combined-European_Alphabets">ProMdlnameCopy */ ProMdlCopy
(mdl); 
// what to do? /*who knows? That's a question
 btkString errorStr = "\"ProMdlCopy (mdl)\" - error";
 PrintModelDependencies(modelList);
 /*
  * This is long multiline comment, where some Pro/TK
  * calls like ** PROTK_DEPRECATED ProCollectionAlloc -&gt; ProCrvcollectionAlloc, 
ProSrfcollectionAlloc ** ProCollectionAlloc or ** PROTK_DEPRECATED-&gt; 
AS APPROPRIATE ** ProCollectioninstrAlloc 
  * can be found.
  */
 return;
}
</span></pre></div>
            </div>
         </div>
      </div>
   </body>
</html>
