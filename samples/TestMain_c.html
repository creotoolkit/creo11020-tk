<html>
<head>
<title>TestMain.c</title>
</head>
<body bgcolor="#ffffff">
<pre><a name="anchor-0"></a>
/*
	Copyright (c) 2024 PTC Inc. and/or Its Subsidiary Companies. All Rights Reserved.
*/

<a name="anchor-1"></a>
/*--------------------------------------------------------------------*\
Pro/TOOLKIT includes
\*--------------------------------------------------------------------*/
#include &lt;ProToolkit.h>
<a name="anchor-2"></a>#include &quot;ProObjects.h&quot;
#include &quot;ProMdl.h&quot;
#include &quot;ProMenu.h&quot;
#include &quot;ProMenuBar.h&quot;
#include &quot;ProMessage.h&quot;
<a name="anchor-3"></a>#include &quot;ProUtil.h&quot;
#include &quot;ProCore.h&quot;

/*--------------------------------------------------------------------*\
Pro/DEVELOP includes
<a name="anchor-4"></a>\*--------------------------------------------------------------------*/

/*--------------------------------------------------------------------*\
C System includes
\*--------------------------------------------------------------------*/
<a name="anchor-5"></a>
/*--------------------------------------------------------------------*\
Application includes
\*--------------------------------------------------------------------*/
#include &quot;TestError.h&quot;
<a name="anchor-6"></a>#include &quot;UtilMessage.h&quot;
#include &quot;TestSelect.h&quot;
#include &quot;TestParams.h&quot;
#include &quot;TestExtobj.h&quot;
#include &quot;TestDbms.h&quot;
<a name="anchor-7"></a>#include &quot;TestNotify.h&quot;
#include &quot;TestSimpRep.h&quot;
#include &quot;TestSetup.h&quot;
#include &quot;TestFeat.h&quot;
#include &quot;TestSect.h&quot;
<a name="anchor-8"></a>#include &quot;TestMisc.h&quot;
#include &quot;TestGenedata.h&quot;
#include &quot;TestMenu.h&quot;
#include &quot;UtilString.h&quot;
#include &quot;TestAnalysis.h&quot;
<a name="anchor-9"></a>#include &quot;PTApplsUnicodeUtils.h&quot;
#include &quot;ProTKRunTime.h&quot;
#include &quot;UtilMenu.h&quot;

/*--------------------------------------------------------------------*\
<a name="anchor-10"></a>Application macros
\*--------------------------------------------------------------------*/

/*--------------------------------------------------------------------*\
Application data types
<a name="anchor-11"></a>\*--------------------------------------------------------------------*/

/*--------------------------------------------------------------------*\
Application global/external data
\*--------------------------------------------------------------------*/
<a name="anchor-12"></a>
/*====================================================================*\
    FUNCTION :	TestAccessDefault()
    PURPOSE  :   enable access to the -Main button	
\*====================================================================*/
<a name="anchor-13"></a>static uiCmdAccessState TestAccessDefault(uiCmdAccessMode access_mode)
{
  return (ACCESS_AVAILABLE);
}
/*====================================================================*\
<a name="anchor-14"></a>    FUNCTION :  TestNoAccess()
    PURPOSE  :   disable access any button
\*====================================================================*/
static uiCmdAccessState TestNoAccess(uiCmdAccessMode access_mode)
{
<a name="anchor-15"></a>  return (ACCESS_UNAVAILABLE);
}

/*====================================================================*\
    FUNCTION :	TestDrawingAccess()
<a name="anchor-16"></a>    PURPOSE  :   enable access to the Drawing button	
\*====================================================================*/
static uiCmdAccessState TestDrawingAccess(uiCmdAccessMode access_mode)
{
  ProMdl mdl;
<a name="anchor-17"></a>  ProError status;
  ProMdlType mdltype;

  status = ProMdlCurrentGet(&amp;mdl);
  if (status == PRO_TK_NO_ERROR)
<a name="anchor-18"></a>    {
      ProMdlTypeGet(mdl, &amp;mdltype); 
      if (mdltype == PRO_MDL_DRAWING) 
	return (ACCESS_AVAILABLE);
      else 
<a name="anchor-19"></a>	return (ACCESS_UNAVAILABLE);
    }
  return (ACCESS_UNAVAILABLE);
}

<a name="anchor-20"></a>/*====================================================================*\
    FUNCTION :	TestDiagramAccess()
    PURPOSE  :   enable access to the Diagram button	
\*====================================================================*/
static uiCmdAccessState TestDiagramAccess(uiCmdAccessMode access_mode)
<a name="anchor-21"></a>{
  ProMdl mdl;
  ProError status;
  ProMdlType mdltype;

<a name="anchor-22"></a>  status = ProMdlCurrentGet(&amp;mdl);

  if (status == PRO_TK_NO_ERROR)
    {
      status = ProMdlTypeGet(mdl, &amp;mdltype); 
<a name="anchor-23"></a>      if (status == PRO_TK_NO_ERROR &amp;&amp; mdltype == PRO_MDL_DIAGRAM) 
	return (ACCESS_AVAILABLE);
      else 
	return (ACCESS_UNAVAILABLE);
    }
<a name="anchor-24"></a>  return (ACCESS_UNAVAILABLE);
}

/*====================================================================*\
    FUNCTION :	TestReportAccess()
<a name="anchor-25"></a>    PURPOSE  :   enable access to the Report button	
\*====================================================================*/
static uiCmdAccessState TestReportAccess(uiCmdAccessMode access_mode)
{
  ProMdl mdl;
<a name="anchor-26"></a>  ProError status;
  ProMdlType mdltype;

  status = ProMdlCurrentGet(&amp;mdl);

<a name="anchor-27"></a>  if (status == PRO_TK_NO_ERROR)
    {
      status = ProMdlTypeGet(mdl, &amp;mdltype); 
      if (status == PRO_TK_NO_ERROR &amp;&amp; mdltype == PRO_MDL_REPORT) 
	return (ACCESS_AVAILABLE);
<a name="anchor-28"></a>      else 
	return (ACCESS_UNAVAILABLE);
    }
  return (ACCESS_UNAVAILABLE);
}
<a name="anchor-29"></a>
/*====================================================================*\
    FUNCTION :	TestLayoutAccess()
    PURPOSE  :   enable access to the Layout button	
\*====================================================================*/
<a name="anchor-30"></a>static uiCmdAccessState TestLayoutAccess(uiCmdAccessMode access_mode)
{
  ProMdl mdl;
  ProError status;
  ProMdlType mdltype;
<a name="anchor-31"></a>
  status = ProMdlCurrentGet(&amp;mdl);
  if (status == PRO_TK_NO_ERROR)
    {
      ProMdlTypeGet(mdl, &amp;mdltype); 
<a name="anchor-32"></a>      if (mdltype == PRO_MDL_LAYOUT) 
	return (ACCESS_AVAILABLE);
      else 
	return (ACCESS_UNAVAILABLE);
    }
<a name="anchor-33"></a>  return (ACCESS_UNAVAILABLE);
}
/*====================================================================*\
    FUNCTION :  TestPartAccess()
    PURPOSE  :   enable access to the Part button
<a name="anchor-34"></a>\*====================================================================*/
static uiCmdAccessState TestPartAccess(uiCmdAccessMode access_mode)
{
  ProMdl mdl;
  ProError status;
<a name="anchor-35"></a>  ProMdlType mdltype;

  status = ProMdlCurrentGet(&amp;mdl);
  if (status == PRO_TK_NO_ERROR)
    {
<a name="anchor-36"></a>      status = ProMdlTypeGet(mdl, &amp;mdltype);
      if (status == PRO_TK_NO_ERROR &amp;&amp; mdltype == PRO_MDL_PART)
        return (ACCESS_AVAILABLE);
    }
  return (ACCESS_UNAVAILABLE);
<a name="anchor-37"></a>}
/*====================================================================*\
    FUNCTION :  TestAsmAccess()
    PURPOSE  :   enable access to the Asm button
\*====================================================================*/
<a name="anchor-38"></a>static uiCmdAccessState TestAsmAccess(uiCmdAccessMode access_mode)
{
  ProMdl mdl;
  ProError status;
  ProMdlType mdltype;
<a name="anchor-39"></a>
  status = ProMdlCurrentGet(&amp;mdl);
  if (status == PRO_TK_NO_ERROR)
    {
      status = ProMdlTypeGet(mdl, &amp;mdltype);
<a name="anchor-40"></a>      if (status == PRO_TK_NO_ERROR &amp;&amp; mdltype == PRO_MDL_ASSEMBLY)
        return (ACCESS_AVAILABLE);
    }
  return (ACCESS_UNAVAILABLE);
}
<a name="anchor-41"></a>/*====================================================================*\
    FUNCTION :  TestAsmAccess()
    PURPOSE  :   enable access to the Asm button
\*====================================================================*/
static uiCmdAccessState TestMfgAccess(uiCmdAccessMode access_mode)
<a name="anchor-42"></a>{
  ProMdl mdl;
  ProError status;
  ProMdlType mdltype;

<a name="anchor-43"></a>  status = ProMdlCurrentGet(&amp;mdl);
  if (status == PRO_TK_NO_ERROR)
    {
      status = ProMdlTypeGet(mdl, &amp;mdltype);
      if (status == PRO_TK_NO_ERROR &amp;&amp; mdltype == PRO_MDL_MFG)
<a name="anchor-44"></a>        return (ACCESS_AVAILABLE);
    }
  return (ACCESS_UNAVAILABLE);
}
/*====================================================================*\
<a name="anchor-45"></a>    FUNCTION :  TestAsmProcessPlanAccess()
    PURPOSE  :   enable access to the Asm Process button
\*====================================================================*/
static uiCmdAccessState TestAsmProcessPlanAccess(uiCmdAccessMode access_mode)
{
<a name="anchor-46"></a>  ProMdl mdl;
  ProError status;
  ProMdlType mdltype;
  ProMdlsubtype subtype;

<a name="anchor-47"></a>  status = ProMdlCurrentGet(&amp;mdl);
  if (status == PRO_TK_NO_ERROR)
    {
      status = ProMdlTypeGet(mdl, &amp;mdltype);
      if (mdltype == PRO_MDL_ASSEMBLY &amp;&amp; status == PRO_TK_NO_ERROR)
<a name="anchor-48"></a>      {
        status = ProMdlSubtypeGet(mdl,&amp;subtype);
        if (subtype == PROMDLSTYPE_ASM_PROCPLAN &amp;&amp; status == PRO_TK_NO_ERROR)
            return (ACCESS_AVAILABLE);
      }
<a name="anchor-49"></a>    }
  return (ACCESS_UNAVAILABLE);
}
/*====================================================================*\
    FUNCTION :  TestAsmMoldLayoutAccess()
<a name="anchor-50"></a>    PURPOSE  :   enable access to the Asm Mold Layout  button
\*====================================================================*/
static uiCmdAccessState TestAsmMoldLayoutAccess(uiCmdAccessMode access_mode)
{
  ProMdl mdl;
<a name="anchor-51"></a>  ProError status;
  ProMdlType mdltype;
  ProMdlsubtype subtype;

  status = ProMdlCurrentGet(&amp;mdl);
<a name="anchor-52"></a>  if (status == PRO_TK_NO_ERROR)
    {
      status = ProMdlTypeGet(mdl, &amp;mdltype);
      if (mdltype == PRO_MDL_ASSEMBLY &amp;&amp; status == PRO_TK_NO_ERROR)
      {
<a name="anchor-53"></a>        status = ProMdlSubtypeGet(mdl,&amp;subtype);
        if (subtype == PROMDLSTYPE_ASM_CLASS_CAV &amp;&amp; status == PRO_TK_NO_ERROR)
            return (ACCESS_AVAILABLE);
      }
    }
<a name="anchor-54"></a>  return (ACCESS_UNAVAILABLE);
}
/*====================================================================*\
    FUNCTION :  TestMfgMoldCavityAccess()
    PURPOSE  :   enable access to the Asm Mold Layout  button
<a name="anchor-55"></a>\*====================================================================*/
static uiCmdAccessState TestMfgMoldCavityAccess(uiCmdAccessMode access_mode)
{
  ProMdl mdl;
  ProError status;
<a name="anchor-56"></a>  ProMdlType mdltype;
  ProMdlsubtype subtype;

  status = ProMdlCurrentGet(&amp;mdl);
  if (status == PRO_TK_NO_ERROR)
<a name="anchor-57"></a>    {
      status = ProMdlTypeGet(mdl, &amp;mdltype);
      if (mdltype == PRO_MDL_MFG &amp;&amp; status == PRO_TK_NO_ERROR)
      {
        status = ProMdlSubtypeGet(mdl,&amp;subtype);
<a name="anchor-58"></a>        if (subtype == PROMDLSTYPE_MFG_MOLD &amp;&amp; status == PRO_TK_NO_ERROR)
            return (ACCESS_AVAILABLE);
      }
    }
  return (ACCESS_UNAVAILABLE);
<a name="anchor-59"></a>}
/*====================================================================*\
    FUNCTION :	main()
    PURPOSE  :	To test ProToolkitMain
\*====================================================================*/
<a name="anchor-60"></a>int main(int argc, char**argv)
{
    ProTKFprintf(stderr, &quot;Welcome to PRO/TOOLKIT -the \&quot;pt_example\&quot; program\n&quot;);
    ProToolkitMain(argc, argv);
    return (0);
<a name="anchor-61"></a>}
/*====================================================================*\
    FUNCTION :	user_initialize()
    PURPOSE  :	Pro/DEVELOP standard initialize - define menus.
\*====================================================================*/
<a name="anchor-62"></a>int user_initialize(
    int argc,			/** Number of arguments			**/
    char *argv[],		/** Pro/E arguments			**/
    char *proe_vsn,		/** Pro/E version			**/
    char *build,		/** Pro/E build				**/
<a name="anchor-63"></a>    wchar_t err_buff[])		/** Error buffer			**/
{
    ProError status;
    ProPath w_path;
    int menu_id;
<a name="anchor-64"></a>    int size, a;
    char str[PRO_PATH_SIZE], path[PRO_PATH_SIZE];
    ProComment w_com;
    int ProTestMain();
    int ProTestPart();
<a name="anchor-65"></a>    int ProTestAsm();
    int ProTestDraw();
    int ProTestDiagram();
    int ProTestLayout();
    int ProTestMfg();
<a name="anchor-66"></a>    int ProTestMfgNew();
    int ProTestMoldLayoutMenu();
    int ProTestProcstep();
    int ProTestWeldMenu();
    int ProTestReport();    
<a name="anchor-67"></a>    ProError ProTestFemMeshMenu();
    ProError ProTestCavityLayoutMenu();
    int ProTestMoldProd();
    
    ProFileName  message_file;
<a name="anchor-68"></a>    uiCmdCmdId   cmd_id, cmd_id_draw, cmd_id_diagram, cmd_id_report, cmd_id_layout;
    
    /*--------------------------------------------------------------------*\
    Check the size of wchar_t
    \*--------------------------------------------------------------------*/
<a name="anchor-69"></a>    status = ProWcharSizeVerify( sizeof(wchar_t), &amp;size );
    TEST_CALL_REPORT( &quot;ProWcharSizeVerify()&quot;, &quot;user_initialize()&quot;, 
			status, status !=PRO_TK_NO_ERROR );
    if( status !=PRO_TK_NO_ERROR )
    {
<a name="anchor-70"></a>        ProTKSprintf(str,&quot;ERROR wchar_t has size %d - should be %d&quot;,
                sizeof(wchar_t),  size );
        ProUtilMsgPrint(&quot;gen&quot;, &quot;TEST %0s&quot;, str);
        ProTKPrintf(&quot;%s\n&quot;, str);
        return(-1);
<a name="anchor-71"></a>    }

/*--------------------------------------------------------------------*\
    Check that the Pro/E version and build are OK
\*--------------------------------------------------------------------*/
<a name="anchor-72"></a>    if(proe_vsn == NULL)
    {
	ProUtilstrcpy(str,&quot;Pro/E version set to NULL&quot;);
	ProUtilMsgPrint(&quot;gen&quot;, &quot;TEST %0s&quot;, str);
	ProTKPrintf(&quot;%s\n&quot;,str);
<a name="anchor-73"></a>	ProStringToWstring(err_buff, str);
	return(-1);
    }

    if(build == NULL)
<a name="anchor-74"></a>    {
	ProUtilstrcpy(str, &quot;Pro/E build set to NULL&quot;);
	ProUtilMsgPrint(&quot;gen&quot;, &quot;TEST %0s&quot;, str);
	ProTKPrintf(&quot;%s\n&quot;,str);
	ProStringToWstring(err_buff, str);
<a name="anchor-75"></a>	return(-1);
    }
    if(sscanf(build, &quot;%d&quot;, &amp;a) &lt; 1)
    {
	ProTKSprintf(str, &quot;Pro/E build invalid : %s&quot;, build);
<a name="anchor-76"></a>	ProUtilMsgPrint(&quot;gen&quot;, &quot;TEST %0s&quot;, str);
	ProTKPrintf(&quot;%s\n&quot;,str);
	ProStringToWstring(err_buff, str);
	return(-1);
    }
<a name="anchor-77"></a>
/*--------------------------------------------------------------------*\
    Parse the command line setting application parameters
\*--------------------------------------------------------------------*/
    ProUtilCommandLineParse( argc, argv );
<a name="anchor-78"></a>
/*--------------------------------------------------------------------*\
    Print the input arguments
\*--------------------------------------------------------------------*/
    ProTKPrintf(&quot;\n&quot;);
<a name="anchor-79"></a>    for(a=0;a&lt;argc;a++)
    ProTKPrintf(&quot;\targv[%d]       = %s\n&quot;, a, argv[a]);
    ProTKPrintf(&quot;\tPro/E version = %s\n&quot;, proe_vsn);
    ProTKPrintf(&quot;\tPro/E build   = %s\n&quot;, build);

<a name="anchor-80"></a>/*--------------------------------------------------------------------*\
    Open the error log file.
\*--------------------------------------------------------------------*/
    if(argc > 4)
	ProTestErrlogOpen(argv[4], proe_vsn, build);
<a name="anchor-81"></a>    else
	ProTestErrlogOpen((char*)&quot;pt_toolkit&quot;, proe_vsn, build);
/*--------------------------------------------------------------------*\
    Test ProToolkit functions
\*--------------------------------------------------------------------*/
<a name="anchor-82"></a>    TEST_CALL_REPORT(&quot;ProToolkitMain()&quot;, &quot;user_initialize()&quot;, PRO_TK_NO_ERROR, 0);
    TEST_CALL_REPORT( &quot;ProWcharSizeVerify()&quot;, &quot;user_initialize()&quot;,  status , 0);

    status = ProToolkitApplExecPathGet( w_path );
    TEST_CALL_REPORT( &quot;ProToolkitApplExecPathGet()&quot;, &quot;user_initialize()&quot;, 
<a name="anchor-83"></a>			status, status != PRO_TK_NO_ERROR );
    
    ProTKSprintf(str, &quot;Exec path is %0s&quot;, ProWstringToString( path, w_path ));
    ProUtilMsgPrint( &quot;gen&quot;, &quot;TEST %0s&quot;, str);
 
<a name="anchor-84"></a>    ProMessageClear();
    TEST_CALL_REPORT( &quot;ProMessageClear()&quot;, &quot;user_initialize()&quot;, PRO_TK_NO_ERROR, 0 );

    status = ProToolkitApplTextPathGet( w_path );
    TEST_CALL_REPORT( &quot;ProToolkitApplTextPathGet()&quot;, &quot;user_initialize()&quot;, 
<a name="anchor-85"></a>			status, status != PRO_TK_NO_ERROR );
    ProTKSprintf(str, &quot;Text path is %0s&quot;, ProWstringToString( path, w_path ));
    ProUtilMsgPrint( &quot;gen&quot;, &quot;TEST %0s&quot;, str);

    ProMessageClear();
<a name="anchor-86"></a>    TEST_CALL_REPORT( &quot;ProMessageClear()&quot;, &quot;user_initialize()&quot;, PRO_TK_NO_ERROR, 0 );
    
/*---------------------------------------------------------------------*\
    Add &quot;PTExamples&quot; after info button to the menu bar
\*---------------------------------------------------------------------*/
<a name="anchor-87"></a>   ProStringToWstring(message_file, (char*)&quot;gen_msg.txt&quot;);
   status = ProMenubarMenuAdd ((char*)&quot;PTExamples&quot;, (char*)&quot;PTExamples&quot;,
        (char*)&quot;Info&quot;, PRO_B_TRUE, message_file);
    TEST_CALL_REPORT( &quot;ProMenubarMenuAdd()&quot;, &quot;user_initialize()&quot;, PRO_TK_NO_ERROR, 0 );
/*---------------------------------------------------------------------*\
<a name="anchor-88"></a>    Add &quot;-Main&quot; button to the menu bar
\*---------------------------------------------------------------------*/
    status = ProCmdActionAdd((char*)&quot;-Main&quot;,
        (uiCmdCmdActFn)ProTestMain,
        uiProe2ndImmediate, TestAccessDefault,
<a name="anchor-89"></a>        PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id);
    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);

    status = ProMenubarmenuPushbuttonAdd(
<a name="anchor-90"></a>        (char*)&quot;PTExamples&quot;, (char*)&quot;-Main&quot;, (char*)&quot;-Main&quot;,
        (char*)&quot;Non-mode-specific Pro/TOOLKIT test commands&quot;, NULL,
	 PRO_B_TRUE, cmd_id, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);
<a name="anchor-91"></a>
/*---------------------------------------------------------------------*\
    Add &quot;-Drawing&quot; button to the menu bar
\*---------------------------------------------------------------------*/
    status = ProCmdActionAdd((char*)&quot;-TKDrawingtest&quot;,
<a name="anchor-92"></a>			     (uiCmdCmdActFn)ProTestDraw,
			     uiProe2ndImmediate, TestDrawingAccess,
			     PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_draw);
    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
		     status, status != PRO_TK_NO_ERROR);
<a name="anchor-93"></a>
    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-TKDrawingtest&quot;, (char*)&quot;-TKDrawingtest&quot;,
        (char*)&quot;Drawing Test menu&quot;, (char*)&quot;-Main&quot;,
	 PRO_B_TRUE, cmd_id_draw, message_file);
<a name="anchor-94"></a>    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);

/*---------------------------------------------------------------------*\
    Add &quot;-Diagram&quot; button to the menu bar
<a name="anchor-95"></a>\*---------------------------------------------------------------------*/
    status = ProCmdActionAdd((char*)&quot;-TKDiagramtest&quot;,
			     (uiCmdCmdActFn)ProTestDiagram,
			     uiProe2ndImmediate, TestDiagramAccess,
			     PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_diagram);
<a name="anchor-96"></a>    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
		     status, status != PRO_TK_NO_ERROR);

    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-TKDiagramtest&quot;, (char*)&quot;-TKDiagramtest&quot;,
<a name="anchor-97"></a>        (char*)&quot;Diagram Test menu&quot;, (char*)&quot;-TKDrawingtest&quot;,
	 PRO_B_TRUE, cmd_id_diagram, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);

<a name="anchor-98"></a>/*---------------------------------------------------------------------*\
    Add &quot;-Report&quot; button to the menu bar
\*---------------------------------------------------------------------*/
    status = ProCmdActionAdd((char*)&quot;-TKReporttest&quot;,
			     (uiCmdCmdActFn)ProTestReport,
<a name="anchor-99"></a>			     uiProe2ndImmediate, TestReportAccess,
			     PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_report);
    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
		     status, status != PRO_TK_NO_ERROR);

<a name="anchor-100"></a>    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-TKReporttest&quot;, (char*)&quot;-TKReporttest&quot;,
        (char*)&quot;Report Test menu&quot;, (char*)&quot;-TKDiagramtest&quot;,
	 PRO_B_TRUE, cmd_id_report, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
<a name="anchor-101"></a>                      status, status != PRO_TK_NO_ERROR);

/*---------------------------------------------------------------------*\
    Add &quot;-Layout&quot; button to the menu bar
\*---------------------------------------------------------------------*/
<a name="anchor-102"></a>    status = ProCmdActionAdd((char*)&quot;-TKLayouttest&quot;,
			     (uiCmdCmdActFn)ProTestLayout,
			     uiProe2ndImmediate, TestLayoutAccess,
			     PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_layout);
    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
<a name="anchor-103"></a>		     status, status != PRO_TK_NO_ERROR);

    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-TKLayouttest&quot;, (char*)&quot;-TKLayouttest&quot;,
       (char*)&quot;Layout Test menu&quot;, (char*)&quot;-TKReporttest&quot;,
<a name="anchor-104"></a>	 PRO_B_TRUE, cmd_id_layout, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);

/*--------------------------------------------------------------------*\
<a name="anchor-105"></a>    Add to the part menu.
\*--------------------------------------------------------------------*/
    status = ProCmdActionAdd((char*)&quot;-TkPart&quot;,
                             (uiCmdCmdActFn)ProTestPart,
                             uiProe2ndImmediate, TestPartAccess,
<a name="anchor-106"></a>                             PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_layout);
    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
                     status, status != PRO_TK_NO_ERROR);

    status = ProMenubarmenuPushbuttonAdd(
<a name="anchor-107"></a>        (char*)&quot;PTExamples&quot;, (char*)&quot;-TkPart&quot;, (char*)&quot;-TkPart&quot;,
        (char*)&quot;Menu of commands for testing Pro/TOOLKIT in part mode&quot;, (char*)&quot;-TKLayouttest&quot;,
         PRO_B_TRUE, cmd_id_layout, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);
<a name="anchor-108"></a>
#ifndef PT_PRODUCTS_BUILD
    ProMenuFileRegister((char*)&quot;part&quot;,(char*)&quot;part.mnu&quot;, &amp;menu_id);
    status = ProMenuAuxfileRegister((char*)&quot;part&quot;,(char*)&quot;part.aux&quot;, &amp;menu_id);
    TEST_CALL_REPORT(&quot;ProMenuAuxfileRegister()&quot;, &quot;user_initialize()&quot;, 
<a name="anchor-109"></a>		status, status !=PRO_TK_NO_ERROR);

    ProMenubuttonActionSet((char*)&quot;part&quot;,(char*)&quot;-TkPart&quot;, 
	(ProMenubuttonAction)ProTestPart, NULL, 0);
#else
<a name="anchor-110"></a>   ProMenuFileRegister(&quot;jr_part&quot;, &quot;jnew_part.mnu&quot;, &amp;menu_id);
   status = ProMenuAuxfileRegister(&quot;jr_part&quot;, &quot;part.aux&quot;, &amp;menu_id);
   TEST_CALL_REPORT(&quot;ProMenuAuxfileRegister()&quot;, &quot;user_initialize()&quot;,
                status, status !=PRO_TK_NO_ERROR);

<a name="anchor-111"></a>   ProMenubuttonActionSet(&quot;jr_part&quot;, &quot;-TkPart&quot;, ProTestPart, NULL, 0);
#endif

/*--------------------------------------------------------------------*\
    Add to the assembly menu.
<a name="anchor-112"></a>\*--------------------------------------------------------------------*/

    status = ProCmdActionAdd((char*)&quot;-TkAsm&quot;,
                             (uiCmdCmdActFn)ProTestAsm,
                             uiProe2ndImmediate, TestAsmAccess,
<a name="anchor-113"></a>                             PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_layout);
    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
                     status, status != PRO_TK_NO_ERROR);

    status = ProMenubarmenuPushbuttonAdd(
<a name="anchor-114"></a>        (char*)&quot;PTExamples&quot;, (char*)&quot;-TkAsm&quot;, (char*)&quot;-TkAsm&quot;,
        (char*)&quot;Menu of commands for testing Pro/TOOLKIT in assembly mode&quot;, (char*)&quot;-TkPart&quot;,
         PRO_B_TRUE, cmd_id_layout, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);
<a name="anchor-115"></a>
    ProMenuFileRegister((char*)&quot;assembly&quot;,(char*)&quot;assembly.mnu&quot;, &amp;menu_id);
    status = ProMenuAuxfileRegister((char*)&quot;assembly&quot;,(char*)&quot;assembly.aux&quot;, &amp;menu_id);
    TEST_CALL_REPORT(&quot;ProMenuAuxfileRegister()&quot;, &quot;user_initialize()&quot;, 
		status, status !=PRO_TK_NO_ERROR);
<a name="anchor-116"></a>    ProMenubuttonActionSet((char*)&quot;assembly&quot;,(char*)&quot;-TkAsm&quot;, 
			(ProMenubuttonAction)ProTestAsm, NULL, 0);

/*--------------------------------------------------------------------*\
    Add to the diagram menu.
<a name="anchor-117"></a>\*--------------------------------------------------------------------*/
    ProMenuFileRegister((char*)&quot;diagram&quot;,(char*)&quot;diagram.mnu&quot;, &amp;menu_id);
    status = ProMenuAuxfileRegister((char*)&quot;diagram&quot;,(char*)&quot;diagram.aux&quot;, &amp;menu_id);
    TEST_CALL_REPORT(&quot;ProMenuAuxfileRegister()&quot;, &quot;user_initialize()&quot;,
                status, status !=PRO_TK_NO_ERROR);
<a name="anchor-118"></a>    ProMenubuttonActionSet((char*)&quot;diagram&quot;,(char*)&quot;-TkDiagram&quot;,
                        (ProMenubuttonAction)ProTestDiagram, NULL, 0);

/*--------------------------------------------------------------------*\
    Add to the Layout menu.
<a name="anchor-119"></a>\*--------------------------------------------------------------------*/
    ProMenuFileRegister((char*)&quot;notebook&quot;,(char*)&quot;notebook.mnu&quot;, &amp;menu_id);
    status = ProMenuAuxfileRegister((char*)&quot;notebook&quot;,(char*)&quot;notebook.aux&quot;, &amp;menu_id);
    TEST_CALL_REPORT(&quot;ProMenuAuxfileRegister()&quot;, &quot;user_initialize()&quot;, 
		status, status !=PRO_TK_NO_ERROR);
<a name="anchor-120"></a>    ProMenubuttonActionSet((char*)&quot;notebook&quot;,(char*)&quot;-TkLayout&quot;, 
			(ProMenubuttonAction)ProTestLayout, NULL, 0);

/*--------------------------------------------------------------------*\
    Add to the manufacturing menu
<a name="anchor-121"></a>\*--------------------------------------------------------------------*/
    status = ProCmdActionAdd((char*)&quot;-TkMfgNew&quot;,
                             (uiCmdCmdActFn)ProTestMfgNew,
                             uiProe2ndImmediate, TestMfgAccess,
                             PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_layout);
<a name="anchor-122"></a>    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
                     status, status != PRO_TK_NO_ERROR);

    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-TkMfgNew&quot;, (char*)&quot;-TkMfgNew&quot;,
<a name="anchor-123"></a>        (char*)&quot;Command for testing Pro/TOOLKIT in manufacturing mode new&quot;, (char*)&quot;-TkAsm&quot;,
         PRO_B_TRUE, cmd_id_layout, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);

<a name="anchor-124"></a>    status = ProCmdActionAdd((char*)&quot;-TkMfg&quot;,
                             (uiCmdCmdActFn)ProTestMfg,
                             uiProe2ndImmediate, TestMfgAccess,
                             PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_layout);
    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
<a name="anchor-125"></a>                     status, status != PRO_TK_NO_ERROR);

    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-TkMfg&quot;, (char*)&quot;-TkMfg&quot;,
        (char*)&quot;Command for testing Pro/TOOLKIT in manufacturing mode&quot;, (char*)&quot;-TkMfgNew&quot;,
<a name="anchor-126"></a>         PRO_B_TRUE, cmd_id_layout, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);

    ProMenuFileRegister((char*)&quot;manufacture&quot;,(char*)&quot;mfg.mnu&quot;, &amp;menu_id);
<a name="anchor-127"></a>    status = ProMenuAuxfileRegister((char*)&quot;manufacture&quot;,(char*)&quot;mfg.aux&quot;, &amp;menu_id);
    TEST_CALL_REPORT(&quot;ProMenuAuxfileRegister()&quot;, &quot;user_initialize()&quot;, 
		status, status !=PRO_TK_NO_ERROR);

    ProMenubuttonActionSet((char*)&quot;manufacture&quot;,(char*)&quot;-TkMfg&quot;, 
<a name="anchor-128"></a>			(ProMenubuttonAction)ProTestMfg, NULL,0);
    ProMenubuttonActionSet((char*)&quot;manufacture&quot;,(char*)&quot;-TkMfgNew&quot;,
			(ProMenubuttonAction)ProTestMfgNew, NULL, 0);
/*--------------------------------------------------------------------*\
    Add to the mold menu
<a name="anchor-129"></a>\*--------------------------------------------------------------------*/
    status = ProCmdActionAdd((char*)&quot;-TkCavityLayout&quot;,
                             (uiCmdCmdActFn)ProTestCavityLayoutMenu,
                             uiProe2ndImmediate, TestMfgMoldCavityAccess,
                             PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_layout);
<a name="anchor-130"></a>    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
                     status, status != PRO_TK_NO_ERROR);

    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-TkCavityLayout&quot;, (char*)&quot;-TkCavityLayout&quot;,
<a name="anchor-131"></a>        (char*)&quot;Testing cavity layout function&quot;, (char*)&quot;-TkMfg&quot;,
         PRO_B_TRUE, cmd_id_layout, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);

<a name="anchor-132"></a>    ProMenuFileRegister((char*)&quot;mold&quot;,(char*)&quot;mold.mnu&quot;, &amp;menu_id);
    ProMenuAuxfileRegister((char*)&quot;mold&quot;,(char*)&quot;mold.aux&quot;, &amp;menu_id);
    ProMenubuttonActionSet((char*)&quot;mold&quot;,(char*)&quot;-TkCavityLayout&quot;,
        (ProMenubuttonAction)ProTestCavityLayoutMenu,NULL,0);

<a name="anchor-133"></a>/*--------------------------------------------------------------------*\
    Add to the mold layout menu
\*--------------------------------------------------------------------*/
    status = ProCmdActionAdd((char*)&quot;-TkMold Layout&quot;,
                             (uiCmdCmdActFn)ProTestMoldLayoutMenu,
<a name="anchor-134"></a>                             uiProe2ndImmediate, TestMfgMoldCavityAccess,
                             PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_layout);
    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
                     status, status != PRO_TK_NO_ERROR);

<a name="anchor-135"></a>    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-TkMold Layout&quot;, (char*)&quot;-TkMold Layout&quot;,
        (char*)&quot;Mold Layout Test menu&quot;, (char*)&quot;-TkCavityLayout&quot;,
         PRO_B_TRUE, cmd_id_layout, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
<a name="anchor-136"></a>                      status, status != PRO_TK_NO_ERROR);

    ProMenuFileRegister((char*)&quot;Mold_Layout20&quot;, (char*)&quot;rmdt.mnu&quot;, &amp;menu_id);
    ProMenuAuxfileRegister((char*)&quot;Mold_Layout20&quot;, (char*)&quot;rmdt.aux&quot;, &amp;menu_id);

<a name="anchor-137"></a>    ProMenubuttonActionSet((char*)&quot;Mold_Layout20&quot;,(char*)&quot;-TkMold Layout&quot;,
        (ProMenubuttonAction)ProTestMoldLayoutMenu, NULL, 0);

/*--------------------------------------------------------------------*\
    Add to the asm#process menu
<a name="anchor-138"></a>\*--------------------------------------------------------------------*/
    status = ProCmdActionAdd((char*)&quot;-Step Active Set&quot;,
                             (uiCmdCmdActFn)ProTestProcstep,
                             uiProe2ndImmediate, TestAsmProcessPlanAccess,
                             PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_layout);
<a name="anchor-139"></a>    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
                     status, status != PRO_TK_NO_ERROR);

    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-Step Active Set&quot;, (char*)&quot;-Step Active Set&quot;,
<a name="anchor-140"></a>        (char*)&quot;Set Active step for process&quot;,(char*) &quot;-TkMold Layout&quot;,
         PRO_B_TRUE, cmd_id_layout, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);

<a name="anchor-141"></a>    ProMenuFileRegister((char*)&quot;Asm process&quot;, (char*)&quot;asmprocess.mnu&quot;, &amp;menu_id);
    ProMenuAuxfileRegister((char*)&quot;Asm process&quot;, (char*)&quot;asmprocess.aux&quot;, &amp;menu_id);
    ProMenubuttonActionSet((char*)&quot;Asm process&quot;, (char*)&quot;-Step Active Set&quot;,
        (ProMenubuttonAction)ProTestProcstep, NULL, 0);

<a name="anchor-142"></a>/*--------------------------------------------------------------------*\
    Add to the drawing menu.
\*--------------------------------------------------------------------*/
    ProMenuFileRegister((char*)&quot;drawing&quot;,(char*)&quot;draw.mnu&quot;, &amp;menu_id);
    status = ProMenuAuxfileRegister((char*)&quot;drawing&quot;,(char*)&quot;draw.aux&quot;, &amp;menu_id);
<a name="anchor-143"></a>    TEST_CALL_REPORT(&quot;ProMenuAuxfileRegister()&quot;, &quot;user_initialize()&quot;, 
		      status, status !=PRO_TK_NO_ERROR);
    ProMenubuttonActionSet((char*)&quot;drawing&quot;,(char*)&quot;-TkDrawing&quot;, 
			   (ProMenubuttonAction)ProTestDraw, NULL, 0);

<a name="anchor-144"></a>    ProStringToWstring(w_com, (char*)&quot;Application pt_examples started&quot;);
    status = ProTrailfileCommentWrite(w_com);
    TEST_CALL_REPORT(&quot;ProTrailfileCommentWrite()&quot;, &quot;user_initialize()&quot;,
		     status, status != PRO_TK_NO_ERROR);

<a name="anchor-145"></a>/*--------------------------------------------------------------------*\
    Add to the FEM menu.
\*--------------------------------------------------------------------*/
    status = ProCmdActionAdd((char*)&quot;-TkFEM&quot;,
                             (uiCmdCmdActFn)ProTestFemMeshMenu,
<a name="anchor-146"></a>                             uiProe2ndImmediate, TestAsmAccess,
                             PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_layout);
    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
                     status, status != PRO_TK_NO_ERROR);

<a name="anchor-147"></a>    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-TkFEM&quot;, (char*)&quot;-TkFEM&quot;,
        (char*)&quot;Test Pro/MECHANICA FEM Mesh function&quot;, (char*)&quot;-Step Active Set&quot;,
         PRO_B_TRUE, cmd_id_layout, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
<a name="anchor-148"></a>                      status, status != PRO_TK_NO_ERROR);

    ProMenuFileRegister((char*)&quot;assembly&quot;,(char*)&quot;assembly.mnu&quot;, &amp;menu_id);
    status = ProMenuAuxfileRegister((char*)&quot;assembly&quot;,(char*)&quot;tk_fem.aux&quot;, &amp;menu_id);
    ProMenubuttonActionSet((char*)&quot;assembly&quot;,(char*)&quot;TkFEM&quot;,
<a name="anchor-149"></a>        (ProMenubuttonAction)ProTestFemMeshMenu, NULL, 0);

/*--------------------------------------------------------------------*\
    Add to the welding menu.
\*--------------------------------------------------------------------*/
<a name="anchor-150"></a>    status = ProCmdActionAdd((char*)&quot;-TkWelding&quot;,
                             (uiCmdCmdActFn)ProTestWeldMenu,
                             uiProe2ndImmediate, TestAsmAccess,
                             PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_layout);
    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
<a name="anchor-151"></a>                     status, status != PRO_TK_NO_ERROR);
    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-TkWelding&quot;, (char*)&quot;-TkWelding&quot;,
        (char*)&quot;Welding Test menu&quot;, (char*)&quot;-TkFEM&quot;,
         PRO_B_TRUE, cmd_id_layout, message_file);
<a name="anchor-152"></a>    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);

    ProMenuFileRegister((char*)&quot;welding&quot;,(char*)&quot;welding.mnu&quot;, &amp;menu_id);
    ProMenuAuxfileRegister((char*)&quot;welding&quot;,(char*)&quot;welding.aux&quot;, &amp;menu_id);
<a name="anchor-153"></a>    ProMenubuttonActionSet((char*)&quot;welding&quot;,(char*)&quot;-TkWelding&quot;,
	(ProMenubuttonAction)ProTestWeldMenu, NULL, 0);

/*--------------------------------------------------------------------*\
    Add to the mold product menu.
<a name="anchor-154"></a>\*--------------------------------------------------------------------*/
    status = ProCmdActionAdd((char*)&quot;-TkMoldProd&quot;,
                             (uiCmdCmdActFn)ProTestMoldProd,
                             uiProe2ndImmediate, TestAsmAccess,
                             PRO_B_TRUE, PRO_B_TRUE, &amp;cmd_id_layout);
<a name="anchor-155"></a>    TEST_CALL_REPORT(&quot;ProCmdActionAdd&quot;, &quot;user_initialize&quot;,
                     status, status != PRO_TK_NO_ERROR);
    status = ProMenubarmenuPushbuttonAdd(
        (char*)&quot;PTExamples&quot;, (char*)&quot;-TkMoldProd&quot;, (char*)&quot;-TkMoldProd&quot;,
        (char*)&quot;Mold Test menu&quot;, (char*)&quot;-TkWelding&quot;,
<a name="anchor-156"></a>         PRO_B_TRUE, cmd_id_layout, message_file);
    TEST_CALL_REPORT(&quot;ProMenubarmenuPushbuttonAdd&quot;, &quot;user_initialize&quot;,
                      status, status != PRO_TK_NO_ERROR);

    ProMenuFileRegister((char*)&quot;MOLD LAYOUT&quot;,(char*)&quot;moldprod.mnu&quot;, &amp;menu_id);
<a name="anchor-157"></a>    ProMenuAuxfileRegister((char*)&quot;MOLD LAYOUT&quot;,(char*)&quot;moldprod.aux&quot;, &amp;menu_id);
    ProMenubuttonActionSet((char*)&quot;MOLD LAYOUT&quot;,(char*)&quot;-TkMoldProd&quot;,
        (ProMenubuttonAction)ProTestMoldProd,NULL,0);

/*--------------------------------------------------------------------*\
<a name="anchor-158"></a>    Add to the report menu.
\*--------------------------------------------------------------------*/
    ProMenuFileRegister((char*)&quot;report&quot;,(char*)&quot;report.mnu&quot;, &amp;menu_id);
    ProMenuAuxfileRegister((char*)&quot;report&quot;,(char*)&quot;report.aux&quot;, &amp;menu_id);
    ProMenubuttonActionSet((char*)&quot;report&quot;,(char*)&quot;-TkReport&quot;,
<a name="anchor-159"></a>	(ProMenubuttonAction)ProTestReport, NULL, 0);
        
/*--------------------------------------------------------------------*\
    Register analysis types
\*--------------------------------------------------------------------*/
<a name="anchor-160"></a>    ProTestAnalysisRegister ();

/*--------------------------------------------------------------------*\
    Add button to Resolve Feat menu
\*--------------------------------------------------------------------*/
<a name="anchor-161"></a>    ProUtilResolveFeatMenu ();

    return(0);
}

<a name="anchor-162"></a>/*====================================================================*\
    FUNCTION :	user_terminate()
    PURPOSE  :	Pro/DEVELOP standard termination
\*====================================================================*/
void user_terminate()
<a name="anchor-163"></a>{
    ProTestErrlogClose();
}

/*====================================================================*\
<a name="anchor-164"></a>    FUNCTION :	ProTestMain()
    PURPOSE  :	Define and activate menu of Toolkit Test commands which
		are not mode-specific and therefore appear below the
		Main Menu.
\*====================================================================*/
<a name="anchor-165"></a>int ProTestMain()
{
    int menu_id, action;

    int ProTestViewMenu();
<a name="anchor-166"></a>    int ProTestObjWinMenu();
    int ProTestChangeDir();
    int ProTestMessage();
    int ProTestMacro();
    int ProTestConfig();
<a name="anchor-167"></a>    int ProTestMenuBar();
    int ProTestUITableEditExample();

    ProMenuFileRegister((char*)&quot;TkMain&quot;,(char*)&quot;tkmain.mnu&quot;, &amp;menu_id);
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-Notify&quot;, 
<a name="anchor-168"></a>		    (ProMenubuttonAction)ProTestNotify, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-Dbms&quot;,
		    (ProMenubuttonAction)ProTestDbms, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-Section&quot;, 
		    (ProMenubuttonAction)ProTestSectionMenuAction, NULL, 0);
<a name="anchor-169"></a>    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-Simp Rep&quot;,
		    (ProMenubuttonAction)ProTestSRepRetrieve, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-Menus&quot;, 
		    (ProMenubuttonAction)ProTestMenus, NULL, 0);
    
<a name="anchor-170"></a>    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-MenuBar&quot;, 
		    (ProMenubuttonAction)ProTestMenuBar, NULL, 0);
    
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-Message&quot;, 
		    (ProMenubuttonAction)ProTestMessage, NULL, 0);
<a name="anchor-171"></a>    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-Macro&quot;, 
		    (ProMenubuttonAction)ProTestMacro, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-Obj Windows&quot;,
                    (ProMenubuttonAction)ProTestObjWinMenu, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-View&quot;,
<a name="anchor-172"></a>                    (ProMenubuttonAction) ProTestViewMenu, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-UI Table Edit&quot;,
                    (ProMenubuttonAction) ProTestUITableEditExample, 
                    NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;MULTI-CAD&quot;,
<a name="anchor-173"></a>		    (ProMenubuttonAction)ProTestMultiCADFile, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-Change dir&quot;, 
		    (ProMenubuttonAction)ProTestChangeDir, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-Config Opt&quot;, 
		    (ProMenubuttonAction)ProTestConfig, NULL, 0);
<a name="anchor-174"></a>    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;-Done&quot;, 
		    (ProMenubuttonAction)ProMenuDelete, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkMain&quot;,(char*)&quot;TkMain&quot;,
	    	    (ProMenubuttonAction)ProMenuDelete, NULL, 0);

<a name="anchor-175"></a>    ProMenuCreate(PROMENUTYPE_MAIN, (char*)&quot;TkMain&quot;, &amp;menu_id);
    ProMenuProcess((char*)&quot;&quot;, &amp;action);

    return(0);
}
<a name="anchor-176"></a>
/*====================================================================*\
    FUNCTION :	ProTestPart()
    PURPOSE  :	Define and activate menu of Toolkit Test commands for parts
\*====================================================================*/
<a name="anchor-177"></a>int ProTestPart()
{
    ProMdl part;
    ProError status;
    int ProTestFeatures(ProMdl *);
<a name="anchor-178"></a>    int ProTestAnalysis ();
    int ProTestGeometry();
    int ProTestGeneData();
    int ProTestMisc();
    int ProTestLayerMenu();
<a name="anchor-179"></a>//    int ProTestLayerR19Menu();
    int ProTestAnimation();
    int ProTestGraphics();
    int ProTestPartMaterial();
    int ProTestFamlyTabMenu();
<a name="anchor-180"></a>    int ProTestCollection();
    int ProTestRelationsMenu();
    int ProTestInterface();
    int ProTestXsec();
    int ProTestDimensionMenu();
<a name="anchor-181"></a>	int ProTestDispObjectSetMenu();
    
    int menu_id, action;

    status = ProMdlCurrentGet(&amp;part);
<a name="anchor-182"></a>    TEST_CALL_REPORT(&quot;ProMdlCurrentGet()&quot;, &quot;ProTestPart()&quot;,
				status, status != PRO_TK_NO_ERROR);
    ProMenuPush();
    ProMenuFileRegister((char*)&quot;TkPart&quot;,(char*)&quot;tkpart.mnu&quot;, &amp;menu_id);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;TkPart&quot;, 
<a name="anchor-183"></a>    			   (ProMenubuttonAction)ProMenuDelete, NULL,  0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-ExtAnalysis&quot;,
    			   (ProMenubuttonAction)ProTestAnalysis,  &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Features&quot;,
    			   (ProMenubuttonAction)ProTestFeatures,  &amp;part, 0);
<a name="anchor-184"></a>    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Geometry&quot;, 
			    (ProMenubuttonAction)ProTestGeometry,  &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Selection&quot;, 
    			(ProMenubuttonAction)ProTestSelection, &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Parameters&quot;,
<a name="anchor-185"></a>    			(ProMenubuttonAction)ProTestParams,  &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Family Tab&quot;,
    			(ProMenubuttonAction)ProTestFamlyTabMenu, &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Extobj&quot;,
    			(ProMenubuttonAction)ProTestExtobj, &amp;part, 0);
<a name="anchor-186"></a>    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Dbms&quot;, 
    			(ProMenubuttonAction)ProTestDbms, &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-SimpRep&quot;,
    			(ProMenubuttonAction)ProTestSimpRep,  &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Interface&quot;,
<a name="anchor-187"></a>                        (ProMenubuttonAction)ProTestInterface, &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Set Up&quot;, 
    			(ProMenubuttonAction)ProTestSetupMnu, &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Layer&quot;, 
    			(ProMenubuttonAction)ProTestLayerMenu, &amp;part, 0);
<a name="anchor-188"></a>//    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-LayerR19&quot;, 
//    			(ProMenubuttonAction)ProTestLayerR19Menu, &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Appdata&quot;, 
    			(ProMenubuttonAction)ProTestGeneData, &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Misc&quot;, 
<a name="anchor-189"></a>    			(ProMenubuttonAction)ProTestMisc, &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Animation&quot;,
                    (ProMenubuttonAction)ProTestAnimation, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Graphics&quot;,
                    (ProMenubuttonAction)ProTestGraphics, NULL, 0);
<a name="anchor-190"></a>    ProMenubuttonActionSet((char*) &quot;TkPart&quot;,(char*)&quot;-Material&quot;, 
    			(ProMenubuttonAction)ProTestPartMaterial, &amp;part, 0);
    ProMenubuttonActionSet( (char*)&quot;TkPart&quot;,(char*)&quot;-Collection&quot;, 
    			(ProMenubuttonAction)ProTestCollection, &amp;part, 0);
    ProMenubuttonActionSet( (char*)&quot;TkPart&quot;,(char*)&quot;-Relations&quot;, 
<a name="anchor-191"></a>    			(ProMenubuttonAction)ProTestRelationsMenu, &amp;part, 0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Done/Return&quot;, 
    			(ProMenubuttonAction)ProMenuDelete, NULL,  0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Xsec&quot;,
			(ProMenubuttonAction)ProTestXsec, &amp;part,  0);
<a name="anchor-192"></a>    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-Dimension&quot;,
			(ProMenubuttonAction)ProTestDimensionMenu, &amp;part,  0);
    ProMenubuttonActionSet((char*)&quot;TkPart&quot;,(char*)&quot;-DisplayObj&quot;,
	(ProMenubuttonAction)ProTestDispObjectSetMenu, NULL, 0);

<a name="anchor-193"></a>    ProMenuCreate(PROMENUTYPE_MAIN, (char*)&quot;TkPart&quot;, &amp;menu_id);
    ProMenuProcess((char*)&quot;&quot;, &amp;action);

    ProMenuPop();

<a name="anchor-194"></a>    return(0);
}

/*====================================================================*\
    FUNCTION :	ProTestAsm()
<a name="anchor-195"></a>    PURPOSE  :	Define and activate menu of Toolkit Test commands for 
		assemblies.
\*====================================================================*/
int ProTestAsm()
{
<a name="anchor-196"></a>    ProMdl assembly;
    ProError status;
    int ProTestFeatures(ProMdl *);
    int ProTestGeometry();
    int ProTestMisc();
<a name="anchor-197"></a>    int ProTestLayerMenu();
//    int ProTestLayerR19Menu();
    int ProTestAnimation();
    int ProTestAsmFunc();
    int ProTestAsmcomppathFunc();
<a name="anchor-198"></a>    int ProTestAsmcompFunc();
    int ProTestGraphics();
    int ProTestFamlyTabMenu();
    int ProTestCollection();
    int ProTestInterface();
<a name="anchor-199"></a>    int ProTestXsec();
    int ProTestDimensionMenu();
    int ProTestDrag();
	int ProTestDispObjectSetMenu();
    
<a name="anchor-200"></a>    int menu_id, action;

    int ProTestExtrnReferences (ProMdl *model);
    /* TestExtref.c */

<a name="anchor-201"></a>    status = ProMdlCurrentGet(&amp;assembly);
    TEST_CALL_REPORT(&quot;ProMdlCurrentGet()&quot;, &quot;ProTestAsm()&quot;,
				status, status != PRO_TK_NO_ERROR);

    ProMenuFileRegister((char*)&quot;TkAsm&quot;,(char*)&quot;tkasm.mnu&quot;, &amp;menu_id);
<a name="anchor-202"></a>    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*) &quot;TkAsm&quot;,
			(ProMenubuttonAction)ProMenuDelete, NULL,  0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Features&quot;,
			(ProMenubuttonAction)ProTestFeatures,  &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Geometry&quot;, 
<a name="anchor-203"></a>    			(ProMenubuttonAction)ProTestGeometry,  &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Selection&quot;,
    			(ProMenubuttonAction)ProTestSelection, &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Parameters&quot;,
    			(ProMenubuttonAction)ProTestParams,  &amp;assembly, 0);
<a name="anchor-204"></a>    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Family Tab&quot;,
    			(ProMenubuttonAction)ProTestFamlyTabMenu, &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Extobj&quot;,
    			(ProMenubuttonAction)ProTestExtobj,  &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Dbms&quot;, 
<a name="anchor-205"></a>    			(ProMenubuttonAction)ProTestDbms,  &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-SimpRep&quot;,
    			(ProMenubuttonAction)ProTestSimpRep,  &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Interface&quot;,
                        (ProMenubuttonAction)ProTestInterface,  &amp;assembly, 0);
<a name="anchor-206"></a>    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Set Up&quot;, 
    			(ProMenubuttonAction)ProTestSetupMnu, &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Layer&quot;, 
    			(ProMenubuttonAction)ProTestLayerMenu, &amp;assembly, 0);
//    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-LayerR19&quot;,
<a name="anchor-207"></a>//    			(ProMenubuttonAction)ProTestLayerR19Menu, &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Misc&quot;, 
    			(ProMenubuttonAction)ProTestMisc,  &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Expl/Unexpl&quot;, 
    			(ProMenubuttonAction)ProTestAsmFunc,  &amp;assembly, 0);
<a name="anchor-208"></a>    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Rotate comp&quot;, 
    			(ProMenubuttonAction)ProTestAsmcomppathFunc,
			&amp;assembly,0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Components&quot;,
                    (ProMenubuttonAction)ProTestAsmcompFunc, &amp;assembly, 0);
<a name="anchor-209"></a>    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Animation&quot;,
                    (ProMenubuttonAction)ProTestAnimation, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Graphics&quot;,
                    (ProMenubuttonAction)ProTestGraphics, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Collection&quot;,
<a name="anchor-210"></a>                    (ProMenubuttonAction)ProTestCollection, &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-ExtRef&quot;,
                    (ProMenubuttonAction)ProTestExtrnReferences, &amp;assembly, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Xsec&quot;,
		    (ProMenubuttonAction)ProTestXsec, &amp;assembly,  0);
<a name="anchor-211"></a>    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Dimension&quot;,
		    (ProMenubuttonAction)ProTestDimensionMenu, &amp;assembly,  0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Drag&quot;,
		    (ProMenubuttonAction)ProTestDrag, &amp;assembly,  0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-DisplayObj&quot;,
<a name="anchor-212"></a>	(ProMenubuttonAction)ProTestDispObjectSetMenu, NULL, 0);
    ProMenubuttonActionSet((char*)&quot;TkAsm&quot;,(char*)&quot;-Done/Return&quot;, 
    			(ProMenubuttonAction)ProMenuDelete, NULL,  0);

    ProMenuCreate(PROMENUTYPE_MAIN, (char*)&quot;TkAsm&quot;, &amp;menu_id);
<a name="anchor-213"></a>    ProMenuProcess((char*)&quot;&quot;, &amp;action);

    return(0);
}

<a name="anchor-214"></a>/*====================================================================*\
    FUNCTION :  ProTestDiagram()
    PURPOSE  :  Define and activate menu of Toolkit Test commands for diagram
\*====================================================================*/
int ProTestDiagram()
<a name="anchor-215"></a>{
    ProMdl diagram;
    ProError status;
    int ProTestLayerMenu();
//    int ProTestLayerR19Menu();
<a name="anchor-216"></a>    int menu_id, action;

    status = ProMdlCurrentGet(&amp;diagram);
    TEST_CALL_REPORT(&quot;ProMdlCurrentGet()&quot;, &quot;ProTestDiagram()&quot;,
                                status, status != PRO_TK_NO_ERROR);
<a name="anchor-217"></a>
    ProMenuFileRegister((char*)&quot;TkDiagram&quot;,(char*)&quot;tkdiagram.mnu&quot;, &amp;menu_id);
    ProMenubuttonActionSet((char*)&quot;TkDiagram&quot;,(char*)&quot;TkDiagram&quot;,
                           (ProMenubuttonAction)ProMenuDelete, NULL,  0);
    ProMenubuttonActionSet((char*)&quot;TkDiagram&quot;,(char*)&quot;-Layer&quot;,
<a name="anchor-218"></a>                        (ProMenubuttonAction)ProTestLayerMenu, &amp;diagram, 0);
//    ProMenubuttonActionSet((char*)&quot;TkDiagram&quot;,(char*)&quot;-LayerR19&quot;,
//                        (ProMenubuttonAction)ProTestLayerR19Menu, &amp;diagram, 0);
    ProMenubuttonActionSet((char*)&quot;TkDiagram&quot;,(char*)&quot;Done TkDiagram&quot;,
                        (ProMenubuttonAction)ProMenuDelete, NULL,  0);
<a name="anchor-219"></a>
    ProMenuCreate(PROMENUTYPE_MAIN, (char*)&quot;TkDiagram&quot;, &amp;menu_id);
    ProMenuProcess((char*)&quot;&quot;, &amp;action);

    return(0);
<a name="anchor-220"></a>}


int ProTestMfg()
{
<a name="anchor-221"></a>    ProMdl mfg;
    ProError status;
    int ProTestFeatures(ProMdl *);
    
    status = ProMdlCurrentGet(&amp;mfg);
<a name="anchor-222"></a>
    status = (ProError) ProTestFeatures(&amp;mfg);

    return 0;
}
<a name="anchor-223"></a>
/*====================================================================*\
    FUNCTION :	ProTestLayout()
    PURPOSE  :	Define and activate menu of Toolkit Test commands for layout
\*====================================================================*/
<a name="anchor-224"></a>int ProTestLayout()
{
    ProMdl layout;
    ProError status;
    int menu_id, action;
<a name="anchor-225"></a>
    status = ProMdlCurrentGet(&amp;layout);
    TEST_CALL_REPORT(&quot;ProMdlCurrentGet()&quot;, &quot;ProTestLayout()&quot;,
				status, status != PRO_TK_NO_ERROR);

<a name="anchor-226"></a>    ProMenuFileRegister((char*)&quot;TkLayout&quot;,(char*)&quot;tklayout.mnu&quot;, &amp;menu_id);
    ProMenubuttonActionSet((char*)&quot;TkLayout&quot;,(char*)&quot;TkLayout&quot;, 
    			   (ProMenubuttonAction)ProMenuDelete, NULL,  0);
    ProMenubuttonActionSet((char*)&quot;TkLayout&quot;,(char*)&quot;-Parameters&quot;,
    			(ProMenubuttonAction)ProTestParams, &amp;layout, 0);
<a name="anchor-227"></a>    ProMenubuttonActionSet((char*)&quot;TkLayout&quot;,(char*)&quot;Done TkLayout&quot;, 
    			(ProMenubuttonAction)ProMenuDelete, NULL,  0);

    ProMenuCreate(PROMENUTYPE_MAIN,(char*)&quot;TkLayout&quot;, &amp;menu_id);
    ProMenuProcess((char*)&quot;&quot;, &amp;action);
<a name="anchor-228"></a>
    return(0);
}

/*====================================================================*\
<a name="anchor-229"></a>    FUNCTION :	ProTestChangeDir()
    PURPOSE  :	Change Pro/E to a new directory	
\*====================================================================*/
int ProTestChangeDir()
{
<a name="anchor-230"></a>    char dir[PRO_PATH_SIZE];
    char str[PRO_PATH_SIZE];
    ProPath  w_dir;
    static ProPath last_dir;
    ProError    status;
<a name="anchor-231"></a>
    ProUtilMsgPrint(&quot;gen&quot;, &quot;TEST %0s&quot;, &quot;Enter a directory name or &lt;back>:&quot;);

    if (ProUtilStringGet(w_dir, NULL, PRO_LINE_SIZE)==0)
	return (0);
<a name="anchor-232"></a>
    if (ProUtilStrnwscmp((char*)&quot;&lt;back>&quot;, w_dir, 6)==0)
    {
	status = ProDirectoryChange(last_dir);
    }
<a name="anchor-233"></a>    else
    {
	status = ProDirectoryCurrentGet(last_dir);
	TEST_CALL_REPORT(&quot;ProDirectoryCurrentGet()&quot;, &quot;ProTestChangeDir()&quot;, 
		status, status !=PRO_TK_NO_ERROR);
<a name="anchor-234"></a>	status = ProDirectoryChange(w_dir);
    }
    TEST_CALL_REPORT(&quot;ProDirectoryChange()&quot;, &quot;ProTestChangeDir()&quot;, status, 0);
    if (status == PRO_TK_NO_ERROR)
        ProUtilMsgPrint(&quot;gen&quot;, &quot;TEST %0s&quot;, &quot;Directory succesfully changed&quot;);
<a name="anchor-235"></a>    else
        ProUtilMsgPrint(&quot;gen&quot;, &quot;TEST %0s&quot;, &quot;Directory NOT changed&quot;);

    ProMessageClear();
    status = ProDirectoryCurrentGet(w_dir);
<a name="anchor-236"></a>    TEST_CALL_REPORT(&quot;ProDirectoryCurrentGet()&quot;, &quot;ProTestChangeDir()&quot;, 
		status, status !=PRO_TK_NO_ERROR);
    ProWstringToString(dir, w_dir);
    ProTKSprintf (str, &quot;Current directory is %s&quot;, dir);
    ProUtilMsgPrint(&quot;gen&quot;, &quot;TEST %0s&quot;, str);
<a name="anchor-237"></a>
    return(0);
}

/*====================================================================*\
<a name="anchor-238"></a>    FUNCTION :	ProTestLayout()
    PURPOSE  :	Define and activate menu of Toolkit Test commands for mold
                products
\*====================================================================*/
int ProTestMoldProd ()
<a name="anchor-239"></a>{
    ProMdl mdl;
    ProError err;
    int menu_id, action;
    int ProTestImm ();
<a name="anchor-240"></a>    int ProTestMoldBase ();
   
    err = ProMdlCurrentGet(&amp;mdl);
    TEST_CALL_REPORT(&quot;ProMdlCurrentGet()&quot;, &quot;ProTestMoldProd()&quot;,
				err, err != PRO_TK_NO_ERROR);
<a name="anchor-241"></a>
    ProMenuFileRegister((char*)&quot;TkMoldProd&quot;,(char*)&quot;tkmoldprod.mnu&quot;, &amp;menu_id);
    ProMenubuttonActionSet((char*)&quot;TkMoldProd&quot;,(char*)&quot;TkMoldProd&quot;, 
    			   (ProMenubuttonAction)ProMenuDelete, NULL,  0);
    ProMenubuttonActionSet((char*)&quot;TkMoldProd&quot;,(char*)&quot;-MoldBase&quot;,
<a name="anchor-242"></a>    			(ProMenubuttonAction)ProTestMoldBase, mdl, 0);
    ProMenubuttonActionSet((char*)&quot;TkMoldProd&quot;,(char*)&quot;-Imm&quot;, 
    			(ProMenubuttonAction)ProTestImm, mdl,  0);

    ProMenuCreate(PROMENUTYPE_MAIN, (char*)&quot;TkMoldProd&quot;, &amp;menu_id);
<a name="anchor-243"></a>    ProMenuProcess((char*)&quot;&quot;, &amp;action);
   
    return (0);
}

<a name="anchor-244"></a>int ProTestReport()
{
    ProError status;
    ProMdl   model;
    int action;
<a name="anchor-245"></a>    int ProTestDrwSimpRep();
    ProError ProTestDrwTable(ProDrawing drawing);

    status = ProMdlCurrentGet(&amp;model);
    TEST_CALL_REPORT(&quot;ProMdlCurrentGet()&quot;, &quot;ProTestReport()&quot;,
<a name="anchor-246"></a>                                status, status != PRO_TK_NO_ERROR);
    ProMenuPush ();
    ProMenuFileRegister((char*)&quot;TkReport&quot;,(char*)&quot;tkreport.mnu&quot;, NULL);
    ProMenubuttonActionSet((char*)&quot;TkReport&quot;,(char*)&quot;-Table&quot;,
        (ProMenubuttonAction)ProTestDrwTable, &amp;model,  0);
<a name="anchor-247"></a>    ProMenubuttonActionSet((char*)&quot;TkReport&quot;,(char*)&quot;-simp rep&quot;,
        (ProMenubuttonAction)ProTestDrwSimpRep, &amp;model,  0);
    ProMenubuttonActionSet((char*)&quot;TkReport&quot;,(char*)&quot;TkReport&quot;,
        (ProMenubuttonAction)ProMenuDelete, NULL,  0);
    ProMenubuttonActionSet((char*)&quot;TkReport&quot;,(char*)&quot;-Done/Return&quot;,
<a name="anchor-248"></a>        (ProMenubuttonAction)ProMenuDelete, NULL,  0);

    ProMenuCreate(PROMENUTYPE_MAIN, (char*)&quot;TkReport&quot;, NULL);
    ProMenuProcess((char*)&quot;&quot;, &amp;action);
    ProMenuPop();
<a name="anchor-249"></a>    return (0);
} 
</pre>
</body>
</html>
