<HTML>
    <HEAD>
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <TITLE>ProSolidRayIntersectionCompute</TITLE>
    
<SCRIPT LANGUAGE="JAVASCRIPT">
  function findProperNode() { top.frames[0].document.apiwizard.api(11, 3999); }
</SCRIPT>

</HEAD>
    <BODY onLoad="findProperNode()" BGCOLOR="#ffffff">
<h4>Category <a href="category_35.html">Solids and parts</a>, Object <a href="ProSolid.html">ProSolid</a></h4>

        <H2>Function ProSolidRayIntersectionCompute</H2>
        <BR>
        <TABLE BORDER="0">
            <TR>
                <TD><B><FONT SIZE="5">Description</FONT></B></TD>
            </TR>
            <TR>
                <TD></TD><TD COLSPAN="2">Returns a list of ray intersections with a model. The function computes the intersection points of both the original ray and its "negative" with the geometry of the model. The output array is sorted in order of increasing signed distance. It is the responsibility of the user to find whether the ray is inside or outside the model.
<p> If a ray hits in the middle of a face on the model, the face is selected. If however, the intersection point is very close (within an internally determined selection aperture) to an edge is also selected. Thus, more than one entry of type surface or edge in the <i><A HREF="proselection_h.html#ProSelection">ProSelection</A></i> array may correspond to one actual piercing of the model by the ray.
<p> In an assembly, each part is processed separately. Therefore, if two coincident mating faces are hit, these will be recorded as two separate hits, because they are on two distinct faces.
<p> You can set the default value of the <i>aperture_radius</i> using the configuration file option "pick_aperture_radius value" (the default is 7). This is the radius, in pixels, that controls whether a ray is close enough to an edge for it to be counted as a ray hit.</TD>
            </TR>
            <TR>
                <TR>
                    <TD><b>Replacement in Object TOOLKIT: </b></TD><TD><A HREF="../../../otk_cpp_doc/objecttoolkit_Creo/api/t-wfcModel-WModel.html#ComputeRayIntersections">wfcWModel::ComputeRayIntersections</A></TD>
                </TR>
            </TR>
            <TR>
                <TD><B><FONT SIZE="5">Synopsis</FONT></B></TD>
            </TR>
            <TR>
                <TD COLSPAN="3">#include &lt;<A HREF="prosolid_h.html">ProSolid.h</A>&gt;</TD>
            </TR>
            <TR VALIGN="top">
                <TD><A HREF="protoolkiterrors_h.html#ProError">ProError</A></TD><TD><B>ProSolidRayIntersectionCompute</B></TD><TD>(</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD><A HREF="proobjects_h.html#ProMdl">ProMdl</A> <I>model</I></TD><TD></TD>
            </TR>
            <TR>
                <TD></TD><TD colspan="2">/*

(In)</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD COLSPAN="2">The part or assembly through which the ray is shot.</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD COLSPAN="2">*/</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD>double <I>aperture_radius</I></TD><TD></TD>
            </TR>
            <TR>
                <TD></TD><TD colspan="2">/*

(In)</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD COLSPAN="2">The value of <i>pick_aperture_radius</i>. If the value is less than or equal to 0.0, the function uses the default value (7.0), or the current value in the configuration file.</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD COLSPAN="2">*/</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD><A HREF="prosolid_h.html#ProRay">ProRay</A>* <I>p_ray</I></TD><TD></TD>
            </TR>
            <TR>
                <TD></TD><TD colspan="2">/*

(In)</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD COLSPAN="2">The starting point of the ray and the direction vector (defined as X,Y,Z). The vector is normalized within the function before it is being used.</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD COLSPAN="2">*/</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD><A HREF="proselection_h.html#ProSelection">ProSelection</A>** <I>p_sel_arr</I></TD><TD></TD>
            </TR>
            <TR>
                <TD></TD><TD colspan="2">/*

(Out)</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD COLSPAN="2">An array of <i><A HREF="proselection_h.html#ProSelection">ProSelection</A></i>, one for each selection made. The geometry is in terms of the coordinate system of the part being intersected, not the parent assembly. The function allocates the memory for this argument, and reuses it on subsequent calls.</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD COLSPAN="2">*/</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD>int* <I>p_count</I></TD><TD></TD>
            </TR>
            <TR>
                <TD></TD><TD colspan="2">/*

(Out)</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD COLSPAN="2">The number of selections in <i>p_sel_arr</i>. If the ray does not intersect the model, <i>p_count</i> is 0.</TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD COLSPAN="2">*/</TD>
            </TR>
            <TR VALIGN="top">
                <TD>)</TD>
            </TR>
            <TR>
                <TD><B><FONT SIZE="5">Returns</FONT></B></TD>
            </TR>
            <TR VALIGN="top">
                <TD></TD><TD COLSPAN="2">
                    <TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0">
                        <TR>
                            <TD valign="top"><A HREF="protoolkiterrors_h.html#PRO_TK_NO_ERROR">PRO_TK_NO_ERROR</A></TD><TD width="30"></TD><TD valign="top">The function successfully retrieved the information.</TD>
                        </TR>
                        <TR>
                            <TD valign="top"><A HREF="protoolkiterrors_h.html#PRO_TK_E_NOT_FOUND">PRO_TK_E_NOT_FOUND</A></TD><TD width="30"></TD><TD valign="top">No objects were found in the workspace.</TD>
                        </TR>
                        <TR>
                            <TD valign="top"><A HREF="protoolkiterrors_h.html#PRO_TK_BAD_INPUTS">PRO_TK_BAD_INPUTS</A></TD><TD width="30"></TD><TD valign="top">One or more of the invalid arguments are invalid.</TD>
                        </TR>
                    </TABLE>
                </TD>
            </TR>
        </TABLE>
    <P>
<p>
<h4>Manual References:</h4>
<p><ol><li><a href="../manual0/ADev_to_TK.html#47">Pro/DEVELOP to Creo Toolkit Function Mapping: Equivalent Pro/DEVELOP Functions</a><li><a href="../manual0/Fund.html#19">Fundamentals: Objects and Actions</a><li><a href="../manual0/Geometry.html#243">Core: 3D Geometry: Ray Tracing</a><li><a href="../manual0/Geometry.html#244">Core: 3D Geometry: Ray Tracing</a><li><a href="../manual0/selobj.html#29">User Interface: Selection: Unpacking a ProSelection Object</a></ol>
<p>
<p>
<h4>Sample Code References:</h4>
<p><ol><li><a href="../samples/TestSolid_c.html#anchor-47">pt_examples ( TestSolid.c )</a><li><a href="../samples/TestRay_c.html#anchor-92">pt_examples ( TestRay.c )</a></ol><p>
</BODY>
</HTML>
